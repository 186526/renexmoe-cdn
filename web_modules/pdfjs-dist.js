import{p as process}from"./common/process-2545f00a.js";import{g as getDefaultExportFromNamespaceIfNotNamed,b as getDefaultExportFromCjs,c as createCommonjsModule,a as commonjsGlobal,d as commonjsRequire}from"./common/_commonjsHelpers-c99fd594.js";var _nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$4=getDefaultExportFromNamespaceIfNotNamed(_nodeResolve_empty$1),pdf=createCommonjsModule(function(module,exports){(function(r,y){module.exports=y()})(commonjsGlobal,function(){return function(Q){var r={};function y(e){if(r[e])return r[e].exports;var A=r[e]={i:e,l:!1,exports:{}};return Q[e].call(A.exports,A,A.exports,y),A.l=!0,A.exports}return y.m=Q,y.c=r,y.d=function(e,A,F){y.o(e,A)||Object.defineProperty(e,A,{enumerable:!0,get:F})},y.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},y.t=function(e,A){if(A&1&&(e=y(e)),A&8)return e;if(A&4&&typeof e=="object"&&e&&e.__esModule)return e;var F=Object.create(null);if(y.r(F),Object.defineProperty(F,"default",{enumerable:!0,value:e}),A&2&&typeof e!="string")for(var D in e)y.d(F,D,function(j){return e[j]}.bind(null,D));return F},y.n=function(e){var A=e&&e.__esModule?function(){return e.default}:function(){return e};return y.d(A,"a",A),A},y.o=function(e,A){return Object.prototype.hasOwnProperty.call(e,A)},y.p="",y(y.s=0)}([function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLinkAttributes",{enumerable:!0,get:function(){return e.addLinkAttributes}}),Object.defineProperty(r,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(r,"LinkTarget",{enumerable:!0,get:function(){return e.LinkTarget}}),Object.defineProperty(r,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(r,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(r,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(r,"build",{enumerable:!0,get:function(){return A.build}}),Object.defineProperty(r,"getDocument",{enumerable:!0,get:function(){return A.getDocument}}),Object.defineProperty(r,"LoopbackPort",{enumerable:!0,get:function(){return A.LoopbackPort}}),Object.defineProperty(r,"PDFDataRangeTransport",{enumerable:!0,get:function(){return A.PDFDataRangeTransport}}),Object.defineProperty(r,"PDFWorker",{enumerable:!0,get:function(){return A.PDFWorker}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return A.version}}),Object.defineProperty(r,"CMapCompressionType",{enumerable:!0,get:function(){return F.CMapCompressionType}}),Object.defineProperty(r,"createObjectURL",{enumerable:!0,get:function(){return F.createObjectURL}}),Object.defineProperty(r,"createPromiseCapability",{enumerable:!0,get:function(){return F.createPromiseCapability}}),Object.defineProperty(r,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return F.createValidAbsoluteUrl}}),Object.defineProperty(r,"InvalidPDFException",{enumerable:!0,get:function(){return F.InvalidPDFException}}),Object.defineProperty(r,"MissingPDFException",{enumerable:!0,get:function(){return F.MissingPDFException}}),Object.defineProperty(r,"OPS",{enumerable:!0,get:function(){return F.OPS}}),Object.defineProperty(r,"PasswordResponses",{enumerable:!0,get:function(){return F.PasswordResponses}}),Object.defineProperty(r,"PermissionFlag",{enumerable:!0,get:function(){return F.PermissionFlag}}),Object.defineProperty(r,"removeNullCharacters",{enumerable:!0,get:function(){return F.removeNullCharacters}}),Object.defineProperty(r,"shadow",{enumerable:!0,get:function(){return F.shadow}}),Object.defineProperty(r,"UnexpectedResponseException",{enumerable:!0,get:function(){return F.UnexpectedResponseException}}),Object.defineProperty(r,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return F.UNSUPPORTED_FEATURES}}),Object.defineProperty(r,"Util",{enumerable:!0,get:function(){return F.Util}}),Object.defineProperty(r,"VerbosityLevel",{enumerable:!0,get:function(){return F.VerbosityLevel}}),Object.defineProperty(r,"AnnotationLayer",{enumerable:!0,get:function(){return D.AnnotationLayer}}),Object.defineProperty(r,"apiCompatibilityParams",{enumerable:!0,get:function(){return j.apiCompatibilityParams}}),Object.defineProperty(r,"GlobalWorkerOptions",{enumerable:!0,get:function(){return m.GlobalWorkerOptions}}),Object.defineProperty(r,"renderTextLayer",{enumerable:!0,get:function(){return v.renderTextLayer}}),Object.defineProperty(r,"SVGGraphics",{enumerable:!0,get:function(){return h.SVGGraphics}});var e=y(1),A=y(5),F=y(2),D=y(16),j=y(7),m=y(10),v=y(17),h=y(18);{const{isNodeJS:b}=y(4);if(b){const O=y(19).PDFNodeStream;(0,A.setPDFNetworkStreamFactory)(l=>new O(l))}else{const O=y(22).PDFNetworkStream;let l;(0,e.isFetchSupported)()&&(l=y(23).PDFFetchStream),(0,A.setPDFNetworkStreamFactory)(g=>l&&(0,e.isValidFetchUrl)(g.url)?new l(g):new O(g))}}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.addLinkAttributes=O,r.getFilenameFromUrl=l,r.isFetchSupported=P,r.isValidFetchUrl=R,r.loadScript=C,r.deprecated=S,r.PDFDateString=r.StatTimer=r.DOMSVGFactory=r.DOMCMapReaderFactory=r.DOMCanvasFactory=r.DEFAULT_LINK_REL=r.LinkTarget=r.RenderingCancelledException=r.PageViewport=void 0;var e=y(2);const A="noopener noreferrer nofollow";r.DEFAULT_LINK_REL=A;const F="http://www.w3.org/2000/svg";class D{create(s,o){if(s<=0||o<=0)throw new Error("Invalid canvas size");const p=document.createElement("canvas"),f=p.getContext("2d");return p.width=s,p.height=o,{canvas:p,context:f}}reset(s,o,p){if(!s.canvas)throw new Error("Canvas is not specified");if(o<=0||p<=0)throw new Error("Invalid canvas size");s.canvas.width=o,s.canvas.height=p}destroy(s){if(!s.canvas)throw new Error("Canvas is not specified");s.canvas.width=0,s.canvas.height=0,s.canvas=null,s.context=null}}r.DOMCanvasFactory=D;class j{constructor({baseUrl:s=null,isCompressed:o=!1}){this.baseUrl=s,this.isCompressed=o}async fetch({name:s}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!s)throw new Error("CMap name must be specified.");const o=this.baseUrl+s+(this.isCompressed?".bcmap":""),p=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return P()&&R(o,document.baseURI)?fetch(o).then(async f=>{if(!f.ok)throw new Error(f.statusText);let k;return this.isCompressed?k=new Uint8Array(await f.arrayBuffer()):k=(0,e.stringToBytes)(await f.text()),{cMapData:k,compressionType:p}}).catch(f=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${o}`)}):new Promise((f,k)=>{const x=new XMLHttpRequest;x.open("GET",o,!0),this.isCompressed&&(x.responseType="arraybuffer"),x.onreadystatechange=()=>{if(x.readyState!==XMLHttpRequest.DONE)return;if(x.status===200||x.status===0){let N;if(this.isCompressed&&x.response?N=new Uint8Array(x.response):!this.isCompressed&&x.responseText&&(N=(0,e.stringToBytes)(x.responseText)),N){f({cMapData:N,compressionType:p});return}}k(new Error(x.statusText))},x.send(null)}).catch(f=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${o}`)})}}r.DOMCMapReaderFactory=j;class m{create(s,o){(0,e.assert)(s>0&&o>0,"Invalid SVG dimensions");const p=document.createElementNS(F,"svg:svg");return p.setAttribute("version","1.1"),p.setAttribute("width",s+"px"),p.setAttribute("height",o+"px"),p.setAttribute("preserveAspectRatio","none"),p.setAttribute("viewBox","0 0 "+s+" "+o),p}createElement(s){return(0,e.assert)(typeof s=="string","Invalid SVG element type"),document.createElementNS(F,s)}}r.DOMSVGFactory=m;class v{constructor({viewBox:s,scale:o,rotation:p,offsetX:f=0,offsetY:k=0,dontFlip:x=!1}){this.viewBox=s,this.scale=o,this.rotation=p,this.offsetX=f,this.offsetY=k;const N=(s[2]+s[0])/2,I=(s[3]+s[1])/2;let L,B,M,n;p=p%360,p=p<0?p+360:p;switch(p){case 180:L=-1,B=0,M=0,n=1;break;case 90:L=0,B=1,M=1,n=0;break;case 270:L=0,B=-1,M=-1,n=0;break;case 0:L=1,B=0,M=0,n=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}x&&(M=-M,n=-n);let i,a,c,d;L===0?(i=Math.abs(I-s[1])*o+f,a=Math.abs(N-s[0])*o+k,c=Math.abs(s[3]-s[1])*o,d=Math.abs(s[2]-s[0])*o):(i=Math.abs(N-s[0])*o+f,a=Math.abs(I-s[1])*o+k,c=Math.abs(s[2]-s[0])*o,d=Math.abs(s[3]-s[1])*o),this.transform=[L*o,B*o,M*o,n*o,i-L*o*N-M*o*I,a-B*o*N-n*o*I],this.width=c,this.height=d}clone({scale:s=this.scale,rotation:o=this.rotation,offsetX:p=this.offsetX,offsetY:f=this.offsetY,dontFlip:k=!1}={}){return new v({viewBox:this.viewBox.slice(),scale:s,rotation:o,offsetX:p,offsetY:f,dontFlip:k})}convertToViewportPoint(s,o){return e.Util.applyTransform([s,o],this.transform)}convertToViewportRectangle(s){const o=e.Util.applyTransform([s[0],s[1]],this.transform),p=e.Util.applyTransform([s[2],s[3]],this.transform);return[o[0],o[1],p[0],p[1]]}convertToPdfPoint(s,o){return e.Util.applyInverseTransform([s,o],this.transform)}}r.PageViewport=v;class h extends e.BaseException{constructor(s,o){super(s);this.type=o}}r.RenderingCancelledException=h;const b={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};r.LinkTarget=b;function O(t,{url:s,target:o,rel:p,enabled:f=!0}={}){(0,e.assert)(s&&typeof s=="string",'addLinkAttributes: A valid "url" parameter must provided.');const k=(0,e.removeNullCharacters)(s);f?t.href=t.title=k:(t.href="",t.title=`Disabled: ${k}`,t.onclick=()=>!1);let x="";switch(o){case b.NONE:break;case b.SELF:x="_self";break;case b.BLANK:x="_blank";break;case b.PARENT:x="_parent";break;case b.TOP:x="_top";break}t.target=x,t.rel=typeof p=="string"?p:A}function l(t){const s=t.indexOf("#"),o=t.indexOf("?"),p=Math.min(s>0?s:t.length,o>0?o:t.length);return t.substring(t.lastIndexOf("/",p)+1,p)}class g{constructor(){this.started=Object.create(null),this.times=[]}time(s){s in this.started&&(0,e.warn)(`Timer is already running for ${s}`),this.started[s]=Date.now()}timeEnd(s){s in this.started||(0,e.warn)(`Timer has not been started for ${s}`),this.times.push({name:s,start:this.started[s],end:Date.now()}),delete this.started[s]}toString(){const s=[];let o=0;for(const p of this.times){const f=p.name;f.length>o&&(o=f.length)}for(const p of this.times){const f=p.end-p.start;s.push(`${p.name.padEnd(o)} ${f}ms
`)}return s.join("")}}r.StatTimer=g;function P(){return typeof fetch!="undefined"&&typeof Response!="undefined"&&"body"in Response.prototype&&typeof ReadableStream!="undefined"}function R(t,s){try{const{protocol:o}=s?new URL(t,s):new URL(t);return o==="http:"||o==="https:"}catch(o){return!1}}function C(t){return new Promise((s,o)=>{const p=document.createElement("script");p.src=t,p.onload=s,p.onerror=function(){o(new Error(`Cannot load script at: ${p.src}`))},(document.head||document.documentElement).appendChild(p)})}function S(t){console.log("Deprecated API usage: "+t)}let E;class u{static toDateObject(s){if(!s||!(0,e.isString)(s))return null;E||(E=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const o=E.exec(s);if(!o)return null;const p=parseInt(o[1],10);let f=parseInt(o[2],10);f=f>=1&&f<=12?f-1:0;let k=parseInt(o[3],10);k=k>=1&&k<=31?k:1;let x=parseInt(o[4],10);x=x>=0&&x<=23?x:0;let N=parseInt(o[5],10);N=N>=0&&N<=59?N:0;let I=parseInt(o[6],10);I=I>=0&&I<=59?I:0;const L=o[7]||"Z";let B=parseInt(o[8],10);B=B>=0&&B<=23?B:0;let M=parseInt(o[9],10)||0;return M=M>=0&&M<=59?M:0,L==="-"?(x+=B,N+=M):L==="+"&&(x-=B,N-=M),new Date(Date.UTC(p,f,k,x,N,I))}}r.PDFDateString=u},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.arrayByteLength=Y,r.arraysToBytes=K,r.assert=I,r.bytesToString=$,r.createPromiseCapability=ye,r.getVerbosityLevel=f,r.info=k,r.isArrayBuffer=_e,r.isArrayEqual=be,r.isBool=pe,r.isEmptyObj=ve,r.isNum=ue,r.isString=ge,r.isSameOrigin=L,r.createValidAbsoluteUrl=M,r.removeNullCharacters=H,r.setVerbosityLevel=p,r.shadow=n,r.string32=V,r.stringToBytes=X,r.stringToPDFString=oe,r.stringToUTF8String=ne,r.utf8StringToString=Ae,r.warn=x,r.unreachable=N,r.IsEvalSupportedCached=r.IsLittleEndianCached=r.createObjectURL=r.FormatError=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.StreamType=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.MissingPDFException=r.InvalidPDFException=r.AbortException=r.CMapCompressionType=r.ImageKind=r.FontType=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationBorderStyleType=r.UNSUPPORTED_FEATURES=r.VerbosityLevel=r.OPS=r.IDENTITY_MATRIX=r.FONT_IDENTITY_MATRIX=r.BaseException=void 0,y(3);const e=[1,0,0,1,0,0];r.IDENTITY_MATRIX=e;const A=[.001,0,0,.001,0,0];r.FONT_IDENTITY_MATRIX=A;const F={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.PermissionFlag=F;const D={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.TextRenderingMode=D;const j={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.ImageKind=j;const m={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationType=m;const v={MARKED:"Marked",REVIEW:"Review"};r.AnnotationStateModelType=v;const h={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationMarkedState=h;const b={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReviewState=b;const O={GROUP:"Group",REPLY:"R"};r.AnnotationReplyType=O;const l={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFlag=l;const g={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationFieldFlag=g;const P={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationBorderStyleType=P;const R={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};r.StreamType=R;const C={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};r.FontType=C;const S={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=S;const E={NONE:0,BINARY:1,STREAM:2};r.CMapCompressionType=E;const u={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.OPS=u;const t={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath"};r.UNSUPPORTED_FEATURES=t;const s={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};r.PasswordResponses=s;let o=S.WARNINGS;function p(z){Number.isInteger(z)&&(o=z)}function f(){return o}function k(z){o>=S.INFOS&&console.log(`Info: ${z}`)}function x(z){o>=S.WARNINGS&&console.log(`Warning: ${z}`)}function N(z){throw new Error(z)}function I(z,U){z||N(U)}function L(z,U){let q;try{if(q=new URL(z),!q.origin||q.origin==="null")return!1}catch(re){return!1}const J=new URL(U,q);return q.origin===J.origin}function B(z){if(!z)return!1;switch(z.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function M(z,U){if(!z)return null;try{const q=U?new URL(z,U):new URL(z);if(B(q))return q}catch(q){}return null}function n(z,U,q){return Object.defineProperty(z,U,{value:q,enumerable:!0,configurable:!0,writable:!1}),q}const i=function(){function U(q){this.constructor===U&&N("Cannot initialize BaseException."),this.message=q,this.name=this.constructor.name}return U.prototype=new Error,U.constructor=U,U}();r.BaseException=i;class a extends i{constructor(U,q){super(U);this.code=q}}r.PasswordException=a;class c extends i{constructor(U,q){super(U);this.details=q}}r.UnknownErrorException=c;class d extends i{}r.InvalidPDFException=d;class _ extends i{}r.MissingPDFException=_;class T extends i{constructor(U,q){super(U);this.status=q}}r.UnexpectedResponseException=T;class w extends i{}r.FormatError=w;class W extends i{}r.AbortException=W;const G=/\x00/g;function H(z){return typeof z!="string"?(x("The argument for removeNullCharacters must be a string."),z):z.replace(G,"")}function $(z){I(z!==null&&typeof z=="object"&&z.length!==void 0,"Invalid argument for bytesToString");const U=z.length,q=8192;if(U<q)return String.fromCharCode.apply(null,z);const J=[];for(let re=0;re<U;re+=q){const ie=Math.min(re+q,U),ae=z.subarray(re,ie);J.push(String.fromCharCode.apply(null,ae))}return J.join("")}function X(z){I(typeof z=="string","Invalid argument for stringToBytes");const U=z.length,q=new Uint8Array(U);for(let J=0;J<U;++J)q[J]=z.charCodeAt(J)&255;return q}function Y(z){return z.length!==void 0?z.length:(I(z.byteLength!==void 0,"arrayByteLength - invalid argument."),z.byteLength)}function K(z){const U=z.length;if(U===1&&z[0]instanceof Uint8Array)return z[0];let q=0;for(let ie=0;ie<U;ie++)q+=Y(z[ie]);let J=0;const re=new Uint8Array(q);for(let ie=0;ie<U;ie++){let ae=z[ie];ae instanceof Uint8Array||(typeof ae=="string"?ae=X(ae):ae=new Uint8Array(ae));const de=ae.byteLength;re.set(ae,J),J+=de}return re}function V(z){return String.fromCharCode(z>>24&255,z>>16&255,z>>8&255,z&255)}function Z(){const z=new Uint8Array(4);z[0]=1;const U=new Uint32Array(z.buffer,0,1);return U[0]===1}const te={get value(){return n(this,"value",Z())}};r.IsLittleEndianCached=te;function ee(){try{return new Function(""),!0}catch(z){return!1}}const le={get value(){return n(this,"value",ee())}};r.IsEvalSupportedCached=le;const ce=["rgb(",0,",",0,",",0,")"];class se{static makeCssRgb(U,q,J){return ce[1]=U,ce[3]=q,ce[5]=J,ce.join("")}static transform(U,q){return[U[0]*q[0]+U[2]*q[1],U[1]*q[0]+U[3]*q[1],U[0]*q[2]+U[2]*q[3],U[1]*q[2]+U[3]*q[3],U[0]*q[4]+U[2]*q[5]+U[4],U[1]*q[4]+U[3]*q[5]+U[5]]}static applyTransform(U,q){const J=U[0]*q[0]+U[1]*q[2]+q[4],re=U[0]*q[1]+U[1]*q[3]+q[5];return[J,re]}static applyInverseTransform(U,q){const J=q[0]*q[3]-q[1]*q[2],re=(U[0]*q[3]-U[1]*q[2]+q[2]*q[5]-q[4]*q[3])/J,ie=(-U[0]*q[1]+U[1]*q[0]+q[4]*q[1]-q[5]*q[0])/J;return[re,ie]}static getAxialAlignedBoundingBox(U,q){const J=se.applyTransform(U,q),re=se.applyTransform(U.slice(2,4),q),ie=se.applyTransform([U[0],U[3]],q),ae=se.applyTransform([U[2],U[1]],q);return[Math.min(J[0],re[0],ie[0],ae[0]),Math.min(J[1],re[1],ie[1],ae[1]),Math.max(J[0],re[0],ie[0],ae[0]),Math.max(J[1],re[1],ie[1],ae[1])]}static inverseTransform(U){const q=U[0]*U[3]-U[1]*U[2];return[U[3]/q,-U[1]/q,-U[2]/q,U[0]/q,(U[2]*U[5]-U[4]*U[3])/q,(U[4]*U[1]-U[5]*U[0])/q]}static apply3dTransform(U,q){return[U[0]*q[0]+U[1]*q[1]+U[2]*q[2],U[3]*q[0]+U[4]*q[1]+U[5]*q[2],U[6]*q[0]+U[7]*q[1]+U[8]*q[2]]}static singularValueDecompose2dScale(U){const q=[U[0],U[2],U[1],U[3]],J=U[0]*q[0]+U[1]*q[2],re=U[0]*q[1]+U[1]*q[3],ie=U[2]*q[0]+U[3]*q[2],ae=U[2]*q[1]+U[3]*q[3],de=(J+ae)/2,me=Math.sqrt((J+ae)*(J+ae)-4*(J*ae-ie*re))/2,Se=de+me||1,Ce=de-me||1;return[Math.sqrt(Se),Math.sqrt(Ce)]}static normalizeRect(U){const q=U.slice(0);return U[0]>U[2]&&(q[0]=U[2],q[2]=U[0]),U[1]>U[3]&&(q[1]=U[3],q[3]=U[1]),q}static intersect(U,q){function J(de,me){return de-me}const re=[U[0],U[2],q[0],q[2]].sort(J),ie=[U[1],U[3],q[1],q[3]].sort(J),ae=[];if(U=se.normalizeRect(U),q=se.normalizeRect(q),re[0]===U[0]&&re[1]===q[0]||re[0]===q[0]&&re[1]===U[0])ae[0]=re[1],ae[2]=re[2];else return null;if(ie[0]===U[1]&&ie[1]===q[1]||ie[0]===q[1]&&ie[1]===U[1])ae[1]=ie[1],ae[3]=ie[2];else return null;return ae}}r.Util=se;const he=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function oe(z){const U=z.length,q=[];if(z[0]==="\xFE"&&z[1]==="\xFF")for(let J=2;J<U;J+=2)q.push(String.fromCharCode(z.charCodeAt(J)<<8|z.charCodeAt(J+1)));else if(z[0]==="\xFF"&&z[1]==="\xFE")for(let J=2;J<U;J+=2)q.push(String.fromCharCode(z.charCodeAt(J+1)<<8|z.charCodeAt(J)));else for(let J=0;J<U;++J){const re=he[z.charCodeAt(J)];q.push(re?String.fromCharCode(re):z.charAt(J))}return q.join("")}function ne(z){return decodeURIComponent(escape(z))}function Ae(z){return unescape(encodeURIComponent(z))}function ve(z){for(const U in z)return!1;return!0}function pe(z){return typeof z=="boolean"}function ue(z){return typeof z=="number"}function ge(z){return typeof z=="string"}function _e(z){return typeof z=="object"&&z!==null&&z.byteLength!==void 0}function be(z,U){return z.length!==U.length?!1:z.every(function(q,J){return q===U[J]})}function ye(){const z=Object.create(null);let U=!1;return Object.defineProperty(z,"settled",{get(){return U}}),z.promise=new Promise(function(q,J){z.resolve=function(re){U=!0,q(re)},z.reject=function(re){U=!0,J(re)}}),z}const fe=function(){const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(J,re,ie=!1){if(!ie&&URL.createObjectURL){const de=new Blob([J],{type:re});return URL.createObjectURL(de)}let ae=`data:${re};base64,`;for(let de=0,me=J.length;de<me;de+=3){const Se=J[de]&255,Ce=J[de+1]&255,xe=J[de+2]&255,Pe=Se>>2,Te=(Se&3)<<4|Ce>>4,Re=de+1<me?(Ce&15)<<2|xe>>6:64,Ee=de+2<me?xe&63:64;ae+=U[Pe]+U[Te]+U[Re]+U[Ee]}return ae}}();r.createObjectURL=fe},function(Q,r,y){var e=y(4)},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.isNodeJS=void 0;const e=typeof process=="object"&&process+""==="[object process]"&&!process.versions.nw&&!process.versions.electron;r.isNodeJS=e},function(module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_api_compatibility=__w_pdfjs_require__(7),_canvas=__w_pdfjs_require__(8),_worker_options=__w_pdfjs_require__(10),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(11),_metadata=__w_pdfjs_require__(12),_transport_stream=__w_pdfjs_require__(14),_webgl=__w_pdfjs_require__(15);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let createPDFNetworkStream;function setPDFNetworkStreamFactory(Q){createPDFNetworkStream=Q}function getDocument(Q){const r=new PDFDocumentLoadingTask;let y;if(typeof Q=="string")y={url:Q};else if((0,_util.isArrayBuffer)(Q))y={data:Q};else if(Q instanceof PDFDataRangeTransport)y={range:Q};else{if(typeof Q!="object")throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!Q.url&&!Q.data&&!Q.range)throw new Error("Invalid parameter object: need either .data, .range or .url");y=Q}const e=Object.create(null);let A=null,F=null;for(const j in y){if(j==="url"&&typeof window!="undefined"){e[j]=new URL(y[j],window.location).href;continue}else if(j==="range"){A=y[j];continue}else if(j==="worker"){F=y[j];continue}else if(j==="data"&&!(y[j]instanceof Uint8Array)){const m=y[j];if(typeof m=="string")e[j]=(0,_util.stringToBytes)(m);else if(typeof m=="object"&&m!==null&&!isNaN(m.length))e[j]=new Uint8Array(m);else if((0,_util.isArrayBuffer)(m))e[j]=new Uint8Array(m);else throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");continue}e[j]=y[j]}if(e.rangeChunkSize=e.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,e.CMapReaderFactory=e.CMapReaderFactory||_display_utils.DOMCMapReaderFactory,e.ignoreErrors=e.stopAtErrors!==!0,e.fontExtraProperties=e.fontExtraProperties===!0,e.pdfBug=e.pdfBug===!0,Number.isInteger(e.maxImageSize)||(e.maxImageSize=-1),typeof e.isEvalSupported!="boolean"&&(e.isEvalSupported=!0),typeof e.disableFontFace!="boolean"&&(e.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),typeof e.disableRange!="boolean"&&(e.disableRange=!1),typeof e.disableStream!="boolean"&&(e.disableStream=!1),typeof e.disableAutoFetch!="boolean"&&(e.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(e.verbosity),!F){const j={verbosity:e.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};F=j.port?PDFWorker.fromPort(j):new PDFWorker(j),r._worker=F}const D=r.docId;return F.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");const j=_fetchDocument(F,e,A,D),m=new Promise(function(v){let h;A?h=new _transport_stream.PDFDataTransportStream({length:e.length,initialData:e.initialData,progressiveDone:e.progressiveDone,disableRange:e.disableRange,disableStream:e.disableStream},A):e.data||(h=createPDFNetworkStream({url:e.url,length:e.length,httpHeaders:e.httpHeaders,withCredentials:e.withCredentials,rangeChunkSize:e.rangeChunkSize,disableRange:e.disableRange,disableStream:e.disableStream})),v(h)});return Promise.all([j,m]).then(function([v,h]){if(r.destroyed)throw new Error("Loading aborted");const b=new _message_handler.MessageHandler(D,v,F.port);b.postMessageTransfers=F.postMessageTransfers;const O=new WorkerTransport(b,r,h,e);r._transport=O,b.send("Ready",null)})}).catch(r._capability.reject),r}function _fetchDocument(Q,r,y,e){return Q.destroyed?Promise.reject(new Error("Worker was destroyed")):(y&&(r.length=y.length,r.initialData=y.initialData,r.progressiveDone=y.progressiveDone),Q.messageHandler.sendWithPromise("GetDocRequest",{docId:e,apiVersion:"2.5.207",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,postMessageTransfers:Q.postMessageTransfers,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties}).then(function(A){if(Q.destroyed)throw new Error("Worker was destroyed");return A}))}const PDFDocumentLoadingTask=function(){let r=0;class y{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+r++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){this.destroyed=!0;const A=this._transport?this._transport.destroy():Promise.resolve();return A.then(()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}return y}();class PDFDataRangeTransport{constructor(r,y,e=!1){this.length=r,this.initialData=y,this.progressiveDone=e,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(r){this._rangeListeners.push(r)}addProgressListener(r){this._progressListeners.push(r)}addProgressiveReadListener(r){this._progressiveReadListeners.push(r)}addProgressiveDoneListener(r){this._progressiveDoneListeners.push(r)}onDataRange(r,y){for(const e of this._rangeListeners)e(r,y)}onDataProgress(r,y){this._readyCapability.promise.then(()=>{for(const e of this._progressListeners)e(r,y)})}onDataProgressiveRead(r){this._readyCapability.promise.then(()=>{for(const y of this._progressiveReadListeners)y(r)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const r of this._progressiveDoneListeners)r()})}transportReady(){this._readyCapability.resolve()}requestDataRange(r,y){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(r,y){this._pdfInfo=r,this._transport=y}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}getPage(r){return this._transport.getPage(r)}getPageIndex(r){return this._transport.getPageIndex(r)}getDestinations(){return this._transport.getDestinations()}getDestination(r){return this._transport.getDestination(r)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getOpenActionDestination(){return(0,_display_utils.deprecated)("getOpenActionDestination, use getOpenAction instead."),this.getOpenAction().then(function(r){return r&&r.dest?r.dest:null})}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getOutline(){return this._transport.getOutline()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(){return this._transport.startCleanup()}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(r,y,e,A=!1){this._pageIndex=r,this._pageInfo=y,this._transport=e,this._stats=A?new _display_utils.StatTimer:null,this._pdfBug=A,this.commonObjs=e.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:r,rotation:y=this.rotate,offsetX:e=0,offsetY:A=0,dontFlip:F=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:y,offsetX:e,offsetY:A,dontFlip:F})}getAnnotations({intent:r=null}={}){return(!this.annotationsPromise||this.annotationsIntent!==r)&&(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,r),this.annotationsIntent=r),this.annotationsPromise}render({canvasContext:r,viewport:y,intent:e="display",enableWebGL:A=!1,renderInteractiveForms:F=!1,transform:D=null,imageLayer:j=null,canvasFactory:m=null,background:v=null}){this._stats&&this._stats.time("Overall");const h=e==="print"?"print":"display";this.pendingCleanup=!1,this.intentStates[h]||(this.intentStates[h]=Object.create(null));const b=this.intentStates[h];b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const O=m||new _display_utils.DOMCanvasFactory,l=new _webgl.WebGLContext({enable:A});b.displayReadyCapability||(b.displayReadyCapability=(0,_util.createPromiseCapability)(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:h,renderInteractiveForms:F===!0}));const g=C=>{const S=b.renderTasks.indexOf(P);S>=0&&b.renderTasks.splice(S,1),(this.cleanupAfterRender||h==="print")&&(this.pendingCleanup=!0),this._tryCleanup(),C?(P.capability.reject(C),this._abortOperatorList({intentState:b,reason:C})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},P=new InternalRenderTask({callback:g,params:{canvasContext:r,viewport:y,transform:D,imageLayer:j,background:v},objs:this.objs,commonObjs:this.commonObjs,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:O,webGLContext:l,useRequestAnimationFrame:h!=="print",pdfBug:this._pdfBug});b.renderTasks||(b.renderTasks=[]),b.renderTasks.push(P);const R=P.task;return b.displayReadyCapability.promise.then(C=>{if(this.pendingCleanup){g();return}this._stats&&this._stats.time("Rendering"),P.initializeGraphics(C),P.operatorListChanged()}).catch(g),R}getOperatorList(){function r(){if(e.operatorList.lastChunk){e.opListReadCapability.resolve(e.operatorList);const F=e.renderTasks.indexOf(A);F>=0&&e.renderTasks.splice(F,1)}}const y="oplist";this.intentStates[y]||(this.intentStates[y]=Object.create(null));const e=this.intentStates[y];let A;return e.opListReadCapability||(A={},A.operatorListChanged=r,e.opListReadCapability=(0,_util.createPromiseCapability)(),e.renderTasks=[],e.renderTasks.push(A),e.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:y})),e.opListReadCapability.promise}streamTextContent({normalizeWhitespace:r=!1,disableCombineTextItems:y=!1}={}){const e=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:r===!0,combineTextItems:y!==!0},{highWaterMark:e,size(A){return A.items.length}})}getTextContent(r={}){const y=this.streamTextContent(r);return new Promise(function(e,A){function F(){D.read().then(function({value:m,done:v}){if(v){e(j);return}Object.assign(j.styles,m.styles),j.items.push(...m.items),F()},A)}const D=y.getReader(),j={items:[],styles:Object.create(null)};F()})}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const r=[];return Object.keys(this.intentStates).forEach(y=>{const e=this.intentStates[y];if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),y==="oplist")return;e.renderTasks.forEach(function(A){const F=A.capability.promise.catch(function(){});r.push(F),A.cancel()})}),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(r)}cleanup(r=!1){return this.pendingCleanup=!0,this._tryCleanup(r)}_tryCleanup(r=!1){return!this.pendingCleanup||Object.keys(this.intentStates).some(y=>{const e=this.intentStates[y];return e.renderTasks.length!==0||!e.operatorList.lastChunk})?!1:(Object.keys(this.intentStates).forEach(y=>{delete this.intentStates[y]}),this.objs.clear(),this.annotationsPromise=null,r&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0)}_startRenderPage(r,y){const e=this.intentStates[y];if(!e)return;this._stats&&this._stats.timeEnd("Page Request"),e.displayReadyCapability&&e.displayReadyCapability.resolve(r)}_renderPageChunk(r,y){for(let e=0,A=r.length;e<A;e++)y.operatorList.fnArray.push(r.fnArray[e]),y.operatorList.argsArray.push(r.argsArray[e]);y.operatorList.lastChunk=r.lastChunk;for(let e=0;e<y.renderTasks.length;e++)y.renderTasks[e].operatorListChanged();r.lastChunk&&this._tryCleanup()}_pumpOperatorList(r){(0,_util.assert)(r.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const y=this._transport.messageHandler.sendWithStream("GetOperatorList",r),e=y.getReader(),A=this.intentStates[r.intent];A.streamReader=e;const F=()=>{e.read().then(({value:D,done:j})=>{if(j){A.streamReader=null;return}if(this._transport.destroyed)return;this._renderPageChunk(D,A),F()},D=>{if(A.streamReader=null,this._transport.destroyed)return;if(A.operatorList){A.operatorList.lastChunk=!0;for(let j=0;j<A.renderTasks.length;j++)A.renderTasks[j].operatorListChanged();this._tryCleanup()}if(A.displayReadyCapability)A.displayReadyCapability.reject(D);else if(A.opListReadCapability)A.opListReadCapability.reject(D);else throw D})};F()}_abortOperatorList({intentState:r,reason:y,force:e=!1}){if((0,_util.assert)(y instanceof Error||typeof y=="object"&&y!==null,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),!r.streamReader)return;if(!e){if(r.renderTasks.length!==0)return;if(y instanceof _display_utils.RenderingCancelledException){r.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:r,reason:y,force:!0}),r.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(r.streamReader.cancel(new _util.AbortException(y&&y.message)),r.streamReader=null,this._transport.destroyed)return;Object.keys(this.intentStates).some(A=>this.intentStates[A]===r?(delete this.intentStates[A],!0):!1),this.cleanup()}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(r=!0){this._listeners=[],this._defer=r,this._deferred=Promise.resolve(void 0)}postMessage(r,y){function e(D){if(typeof D!="object"||D===null)return D;if(A.has(D))return A.get(D);let j,m;if((j=D.buffer)&&(0,_util.isArrayBuffer)(j)){const v=y&&y.includes(j);return v?m=new D.constructor(j,D.byteOffset,D.byteLength):m=new D.constructor(D),A.set(D,m),m}m=Array.isArray(D)?[]:{},A.set(D,m);for(const v in D){let h,b=D;for(;!(h=Object.getOwnPropertyDescriptor(b,v));)b=Object.getPrototypeOf(b);if(typeof h.value=="undefined")continue;if(typeof h.value=="function"){if(D.hasOwnProperty&&D.hasOwnProperty(v))throw new Error(`LoopbackPort.postMessage - cannot clone: ${D[v]}`);continue}m[v]=e(h.value)}return m}if(!this._defer){this._listeners.forEach(D=>{D.call(this,{data:r})});return}const A=new WeakMap,F={data:e(r)};this._deferred.then(()=>{this._listeners.forEach(D=>{D.call(this,F)})})}addEventListener(r,y){this._listeners.push(y)}removeEventListener(r,y){const e=this._listeners.indexOf(y);this._listeners.splice(e,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function(){const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&typeof commonjsRequire=="function")isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"&&"currentScript"in document){const Q=document.currentScript&&document.currentScript.src;Q&&(fallbackWorkerSrc=Q.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(typeof fallbackWorkerSrc!="undefined")return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){let Q;try{Q=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch(r){}return Q||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=async function(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler};return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(Q){const r="importScripts('"+Q+"');";return URL.createObjectURL(new Blob([r]))}class PDFWorker{constructor({name:r=null,port:y=null,verbosity:e=(0,_util.getVerbosityLevel)()}={}){if(y&&pdfWorkerPorts.has(y))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=r,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=e,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,y){pdfWorkerPorts.set(y,this),this._initializeFromPort(y);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(r){this._port=r,this._messageHandler=new _message_handler.MessageHandler("main","worker",r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker!="undefined"&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let r=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,r)||(r=createCDNWrapper(new URL(r,window.location).href));const y=new Worker(r),e=new _message_handler.MessageHandler("main","worker",y),A=()=>{y.removeEventListener("error",F),e.destroy(),y.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},F=()=>{this._webWorker||A()};y.addEventListener("error",F),e.on("test",j=>{if(y.removeEventListener("error",F),this.destroyed){A();return}j?(this._messageHandler=e,this._port=y,this._webWorker=y,j.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),e.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),e.destroy(),y.terminate())}),e.on("ready",j=>{if(y.removeEventListener("error",F),this.destroyed){A();return}try{D()}catch(m){this._setupFakeWorker()}});const D=()=>{const j=new Uint8Array([this.postMessageTransfers?255:0]);try{e.send("test",j,[j.buffer])}catch(m){(0,_util.warn)("Cannot use postMessage transfers."),j[0]=0,e.send("test",j)}};D();return}catch(y){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then(r=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const y=new LoopbackPort;this._port=y;const e="fake"+nextFakeWorkerId++,A=new _message_handler.MessageHandler(e+"_worker",e,y);r.setup(A,y);const F=new _message_handler.MessageHandler(e,e+"_worker",y);this._messageHandler=F,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})}).catch(r=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${r.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(r){if(!r||!r.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(r.port)?pdfWorkerPorts.get(r.port):new PDFWorker(r)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(r,y,e,A){this.messageHandler=r,this.loadingTask=y,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:y.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this)}),this._params=A,this.CMapReaderFactory=new A.CMapReaderFactory({baseUrl:A.cMapUrl,isCompressed:A.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=e,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const r=[];this.pageCache.forEach(function(e){e&&r.push(e._destroy())}),this.pageCache.length=0,this.pagePromises.length=0;const y=this.messageHandler.sendWithPromise("Terminate",null);return r.push(y),Promise.all(r).then(()=>{this.fontLoader.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:r,loadingTask:y}=this;r.on("GetReader",(e,A)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=F=>{this._lastProgress={loaded:F.loaded,total:F.total}},A.onPull=()=>{this._fullReader.read().then(function({value:F,done:D}){if(D){A.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(F),"GetReader - expected an ArrayBuffer."),A.enqueue(new Uint8Array(F),1,[F])}).catch(F=>{A.error(F)})},A.onCancel=F=>{this._fullReader.cancel(F)}}),r.on("ReaderHeadersReady",e=>{const A=(0,_util.createPromiseCapability)(),F=this._fullReader;return F.headersReady.then(()=>{(!F.isStreamingSupported||!F.isRangeSupported)&&(this._lastProgress&&y.onProgress&&y.onProgress(this._lastProgress),F.onProgress=D=>{y.onProgress&&y.onProgress({loaded:D.loaded,total:D.total})}),A.resolve({isStreamingSupported:F.isStreamingSupported,isRangeSupported:F.isRangeSupported,contentLength:F.contentLength})},A.reject),A.promise}),r.on("GetRangeReader",(e,A)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const F=this._networkStream.getRangeReader(e.begin,e.end);if(!F){A.close();return}A.onPull=()=>{F.read().then(function({value:D,done:j}){if(j){A.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(D),"GetRangeReader - expected an ArrayBuffer."),A.enqueue(new Uint8Array(D),1,[D])}).catch(D=>{A.error(D)})},A.onCancel=D=>{F.cancel(D)}}),r.on("GetDoc",({pdfInfo:e})=>{this._numPages=e.numPages,y._capability.resolve(new PDFDocumentProxy(e,this))}),r.on("DocException",function(e){let A;switch(e.name){case"PasswordException":A=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":A=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":A=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":A=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":A=new _util.UnknownErrorException(e.message,e.details);break}y._capability.reject(A)}),r.on("PasswordRequest",e=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),y.onPassword){const A=F=>{this._passwordCapability.resolve({password:F})};try{y.onPassword(A,e.code)}catch(F){this._passwordCapability.reject(F)}}else this._passwordCapability.reject(new _util.PasswordException(e.message,e.code));return this._passwordCapability.promise}),r.on("DataLoaded",e=>{y.onProgress&&y.onProgress({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),r.on("StartRenderPage",e=>{if(this.destroyed)return;const A=this.pageCache[e.pageIndex];A._startRenderPage(e.transparency,e.intent)}),r.on("commonobj",e=>{if(this.destroyed)return;const[A,F,D]=e;if(this.commonObjs.has(A))return;switch(F){case"Font":const j=this._params;if("error"in D){const h=D.error;(0,_util.warn)(`Error during font loading: ${h}`),this.commonObjs.resolve(A,h);break}let m=null;j.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(m={registerFont(h,b){globalThis.FontInspector.fontAdded(h,b)}});const v=new _font_loader.FontFaceObject(D,{isEvalSupported:j.isEvalSupported,disableFontFace:j.disableFontFace,ignoreErrors:j.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:m});this.fontLoader.bind(v).catch(h=>r.sendWithPromise("FontFallback",{id:A})).finally(()=>{!j.fontExtraProperties&&v.data&&(v.data=null),this.commonObjs.resolve(A,v)});break;case"FontPath":case"FontType3Res":case"Image":this.commonObjs.resolve(A,D);break;default:throw new Error(`Got unknown common object type ${F}`)}}),r.on("obj",e=>{if(this.destroyed)return;const[A,F,D,j]=e,m=this.pageCache[F];if(m.objs.has(A))return;switch(D){case"Image":m.objs.resolve(A,j);const v=8e6;j&&"data"in j&&j.data.length>v&&(m.cleanupAfterRender=!0);break;default:throw new Error(`Got unknown object type ${D}`)}}),r.on("DocProgress",e=>{if(this.destroyed)return;y.onProgress&&y.onProgress({loaded:e.loaded,total:e.total})}),r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),r.on("FetchBuiltInCMap",(e,A)=>{if(this.destroyed){A.error(new Error("Worker was destroyed"));return}let F=!1;A.onPull=()=>{if(F){A.close();return}F=!0,this.CMapReaderFactory.fetch(e).then(function(D){A.enqueue(D,1,[D.cMapData.buffer])}).catch(function(D){A.error(D)})}})}_onUnsupportedFeature({featureId:r}){if(this.destroyed)return;this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(r)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(r){if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request"));const y=r-1;if(y in this.pagePromises)return this.pagePromises[y];const e=this.messageHandler.sendWithPromise("GetPage",{pageIndex:y}).then(A=>{if(this.destroyed)throw new Error("Transport destroyed");const F=new PDFPageProxy(y,A,this,this._params.pdfBug);return this.pageCache[y]=F,F});return this.pagePromises[y]=e,e}getPageIndex(r){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:r}).catch(function(y){return Promise.reject(new Error(y))})}getAnnotations(r,y){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:y})}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(r){return typeof r!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(r=>({info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:this._fullReader?this._fullReader.filename:null}))}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(){return this.messageHandler.sendWithPromise("Cleanup",null).then(()=>{for(let r=0,y=this.pageCache.length;r<y;r++){const e=this.pageCache[r];if(e){const A=e.cleanup();if(!A)throw new Error(`startCleanup: Page ${r+1} is currently rendering.`)}}this.commonObjs.clear(),this.fontLoader.clear()})}get loadingParams(){const r=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r.disableAutoFetch,disableFontFace:r.disableFontFace})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(r){return this._objs[r]?this._objs[r]:this._objs[r]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(r,y=null){if(y)return this._ensureObj(r).capability.promise.then(y),null;const e=this._objs[r];if(!e||!e.resolved)throw new Error(`Requesting object that isn't resolved yet ${r}.`);return e.data}has(r){const y=this._objs[r];return y?y.resolved:!1}resolve(r,y){const e=this._ensureObj(r);e.resolved=!0,e.data=y,e.capability.resolve(y)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(r){this._internalRenderTask=r,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}const InternalRenderTask=function(){const r=new WeakSet;class y{constructor({callback:A,params:F,objs:D,commonObjs:j,operatorList:m,pageIndex:v,canvasFactory:h,webGLContext:b,useRequestAnimationFrame:O=!1,pdfBug:l=!1}){this.callback=A,this.params=F,this.objs=D,this.commonObjs=j,this.operatorListIdx=null,this.operatorList=m,this._pageIndex=v,this.canvasFactory=h,this.webGLContext=b,this._pdfBug=l,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=O===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}initializeGraphics(A=!1){if(this.cancelled)return;if(this._canvas){if(r.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:F,viewport:D,transform:j,imageLayer:m,background:v}=this.params;this.gfx=new _canvas.CanvasGraphics(F,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,m),this.gfx.beginDrawing({transform:j,viewport:D,transparency:A,background:v}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(A=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&r.delete(this._canvas),this.callback(A||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}if(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running)return;this._continue()}_continue(){if(this.running=!0,this.cancelled)return;this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext()}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this.cancel.bind(this))}):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}async _next(){if(this.cancelled)return;this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&r.delete(this._canvas),this.callback()))}}return y}(),version="2.5.207";exports.version=version;const build="0974d605";exports.build=build},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.FontLoader=r.FontFaceObject=void 0;var e=y(2);class A{constructor({docId:m,onUnsupportedFeature:v}){this.constructor===A&&(0,e.unreachable)("Cannot initialize BaseFontLoader."),this.docId=m,this._onUnsupportedFeature=v,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(m){this.nativeFontFaces.push(m),document.fonts.add(m)}insertRule(m){let v=this.styleElement;v||(v=this.styleElement=document.createElement("style"),v.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,document.documentElement.getElementsByTagName("head")[0].appendChild(v));const h=v.sheet;h.insertRule(m,h.cssRules.length)}clear(){this.nativeFontFaces.forEach(function(m){document.fonts.delete(m)}),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(m){if(m.attached||m.missingFile)return;if(m.attached=!0,this.isFontLoadingAPISupported){const h=m.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(b){throw this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,e.warn)(`Failed to load font '${h.family}': '${b}'.`),m.disableFontFace=!0,b}}return}const v=m.createFontFaceRule();if(v){if(this.insertRule(v),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const b=this._queueLoadingCallback(h);this._prepareFontLoadEvent([v],[m],b)})}}_queueLoadingCallback(m){(0,e.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const m=typeof document!="undefined"&&!!document.fonts;return(0,e.shadow)(this,"isFontLoadingAPISupported",m)}get isSyncFontLoadingSupported(){(0,e.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,e.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(m,v,h){(0,e.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let F;r.FontLoader=F,r.FontLoader=F=class extends A{constructor(m){super(m);this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let m=!1;if(typeof navigator=="undefined")m=!0;else{const v=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);v&&v[1]>=14&&(m=!0)}return(0,e.shadow)(this,"isSyncFontLoadingSupported",m)}_queueLoadingCallback(m){function v(){for((0,e.assert)(!b.done,"completeRequest() cannot be called twice."),b.done=!0;h.requests.length>0&&h.requests[0].done;){const O=h.requests.shift();setTimeout(O.callback,0)}}const h=this.loadingContext,b={id:`pdfjs-font-loading-${h.nextRequestId++}`,done:!1,complete:v,callback:m};return h.requests.push(b),b}get _loadTestFont(){const m=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,e.shadow)(this,"_loadTestFont",m())}_prepareFontLoadEvent(m,v,h){function b(I,L){return I.charCodeAt(L)<<24|I.charCodeAt(L+1)<<16|I.charCodeAt(L+2)<<8|I.charCodeAt(L+3)&255}function O(I,L,B,M){const n=I.substring(0,L),i=I.substring(L+B);return n+M+i}let l,g;const P=document.createElement("canvas");P.width=1,P.height=1;const R=P.getContext("2d");let C=0;function S(I,L){if(C++,C>30){(0,e.warn)("Load test font never loaded."),L();return}R.font="30px "+I,R.fillText(".",0,20);const B=R.getImageData(0,0,1,1);if(B.data[3]>0){L();return}setTimeout(S.bind(null,I,L))}const E=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;const t=976;u=O(u,t,E.length,E);const s=16,o=1482184792;let p=b(u,s);for(l=0,g=E.length-3;l<g;l+=4)p=p-o+b(E,l)|0;l<E.length&&(p=p-o+b(E+"XXX",l)|0),u=O(u,s,4,(0,e.string32)(p));const f=`url(data:font/opentype;base64,${btoa(u)});`,k=`@font-face {font-family:"${E}";src:${f}}`;this.insertRule(k);const x=[];for(l=0,g=v.length;l<g;l++)x.push(v[l].loadedName);x.push(E);const N=document.createElement("div");for(N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px",l=0,g=x.length;l<g;++l){const I=document.createElement("span");I.textContent="Hi",I.style.fontFamily=x[l],N.appendChild(I)}document.body.appendChild(N),S(E,function(){document.body.removeChild(N),h.complete()})}};class D{constructor(m,{isEvalSupported:v=!0,disableFontFace:h=!1,ignoreErrors:b=!1,onUnsupportedFeature:O=null,fontRegistry:l=null}){this.compiledGlyphs=Object.create(null);for(const g in m)this[g]=m[g];this.isEvalSupported=v!==!1,this.disableFontFace=h===!0,this.ignoreErrors=b===!0,this._onUnsupportedFeature=O,this.fontRegistry=l}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;const m=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),m}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const m=(0,e.bytesToString)(new Uint8Array(this.data)),v=`url(data:${this.mimetype};base64,${btoa(m)});`,h=`@font-face {font-family:"${this.loadedName}";src:${v}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,v),h}getPathGenerator(m,v){if(this.compiledGlyphs[v]!==void 0)return this.compiledGlyphs[v];let h,b;try{h=m.get(this.loadedName+"_path_"+v)}catch(O){if(!this.ignoreErrors)throw O;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,e.warn)(`getPathGenerator - ignoring character: "${O}".`),this.compiledGlyphs[v]=function(l,g){}}if(this.isEvalSupported&&e.IsEvalSupportedCached.value){let O,l="";for(let g=0,P=h.length;g<P;g++)b=h[g],b.args!==void 0?O=b.args.join(","):O="",l+="c."+b.cmd+"("+O+`);
`;return this.compiledGlyphs[v]=new Function("c","size",l)}return this.compiledGlyphs[v]=function(O,l){for(let g=0,P=h.length;g<P;g++)b=h[g],b.cmd==="scale"&&(b.args=[l,-l]),O[b.cmd].apply(O,b.args)}}}r.FontFaceObject=D},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.apiCompatibilityParams=void 0;var e=y(4);const A=Object.create(null);(function(){e.isNodeJS&&(A.disableFontFace=!0)})();const F=Object.freeze(A);r.apiCompatibilityParams=F},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasGraphics=void 0;var e=y(2),A=y(9),F=16,D=100,j=4096,m=.65,v=1e3,h=16;function b(R){R.mozCurrentTransform||(R._originalSave=R.save,R._originalRestore=R.restore,R._originalRotate=R.rotate,R._originalScale=R.scale,R._originalTranslate=R.translate,R._originalTransform=R.transform,R._originalSetTransform=R.setTransform,R._transformMatrix=R._transformMatrix||[1,0,0,1,0,0],R._transformStack=[],Object.defineProperty(R,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(R,"mozCurrentTransformInverse",{get:function(){var S=this._transformMatrix,E=S[0],u=S[1],t=S[2],s=S[3],o=S[4],p=S[5],f=E*s-u*t,k=u*t-E*s;return[s/f,u/k,t/k,E/f,(s*o-t*p)/k,(u*o-E*p)/f]}}),R.save=function(){var S=this._transformMatrix;this._transformStack.push(S),this._transformMatrix=S.slice(0,6),this._originalSave()},R.restore=function(){var S=this._transformStack.pop();S&&(this._transformMatrix=S,this._originalRestore())},R.translate=function(S,E){var u=this._transformMatrix;u[4]=u[0]*S+u[2]*E+u[4],u[5]=u[1]*S+u[3]*E+u[5],this._originalTranslate(S,E)},R.scale=function(S,E){var u=this._transformMatrix;u[0]=u[0]*S,u[1]=u[1]*S,u[2]=u[2]*E,u[3]=u[3]*E,this._originalScale(S,E)},R.transform=function(S,E,u,t,s,o){var p=this._transformMatrix;this._transformMatrix=[p[0]*S+p[2]*E,p[1]*S+p[3]*E,p[0]*u+p[2]*t,p[1]*u+p[3]*t,p[0]*s+p[2]*o+p[4],p[1]*s+p[3]*o+p[5]],R._originalTransform(S,E,u,t,s,o)},R.setTransform=function(S,E,u,t,s,o){this._transformMatrix=[S,E,u,t,s,o],R._originalSetTransform(S,E,u,t,s,o)},R.rotate=function(S){var E=Math.cos(S),u=Math.sin(S),t=this._transformMatrix;this._transformMatrix=[t[0]*E+t[2]*u,t[1]*E+t[3]*u,t[0]*-u+t[2]*E,t[1]*-u+t[3]*E,t[4],t[5]],this._originalRotate(S)})}var O=function(){function C(S){this.canvasFactory=S,this.cache=Object.create(null)}return C.prototype={getCanvas:function(E,u,t,s){var o;return this.cache[E]!==void 0?(o=this.cache[E],this.canvasFactory.reset(o,u,t),o.context.setTransform(1,0,0,1,0,0)):(o=this.canvasFactory.create(u,t),this.cache[E]=o),s&&b(o.context),o},clear(){for(var S in this.cache){var E=this.cache[S];this.canvasFactory.destroy(E),delete this.cache[S]}}},C}();function l(R){var C=1e3,S=R.width,E=R.height,u,t,s,o=S+1,p=new Uint8Array(o*(E+1)),f=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),k=S+7&~7,x=R.data,N=new Uint8Array(k*E),I=0,L;for(u=0,L=x.length;u<L;u++)for(var B=128,M=x[u];B>0;)N[I++]=M&B?0:255,B>>=1;var n=0;for(I=0,N[I]!==0&&(p[0]=1,++n),t=1;t<S;t++)N[I]!==N[I+1]&&(p[t]=N[I]?2:1,++n),I++;for(N[I]!==0&&(p[t]=2,++n),u=1;u<E;u++){I=u*k,s=u*o,N[I-k]!==N[I]&&(p[s]=N[I]?1:8,++n);var i=(N[I]?4:0)+(N[I-k]?8:0);for(t=1;t<S;t++)i=(i>>2)+(N[I+1]?4:0)+(N[I-k+1]?8:0),f[i]&&(p[s+t]=f[i],++n),I++;if(N[I-k]!==N[I]&&(p[s+t]=N[I]?2:4,++n),n>C)return null}for(I=k*(E-1),s=u*o,N[I]!==0&&(p[s]=8,++n),t=1;t<S;t++)N[I]!==N[I+1]&&(p[s+t]=N[I]?4:8,++n),I++;if(N[I]!==0&&(p[s+t]=4,++n),n>C)return null;var a=new Int32Array([0,o,-1,0,-o,0,0,0,1]),c=[];for(u=0;n&&u<=E;u++){for(var d=u*o,_=d+S;d<_&&!p[d];)d++;if(d===_)continue;var T=[d%o,u],w=p[d],W=d,G;do{var H=a[w];do d+=H;while(!p[d]);G=p[d],G!==5&&G!==10?(w=G,p[d]=0):(w=G&51*w>>4,p[d]&=w>>2|w<<2),T.push(d%o),T.push(d/o|0),p[d]||--n}while(W!==d);c.push(T),--u}var $=function(X){X.save(),X.scale(1/S,-1/E),X.translate(0,-E),X.beginPath();for(let K=0,V=c.length;K<V;K++){var Y=c[K];X.moveTo(Y[0],Y[1]);for(let Z=2,te=Y.length;Z<te;Z+=2)X.lineTo(Y[Z],Y[Z+1])}X.fill(),X.beginPath(),X.restore()};return $}var g=function(){function C(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return C.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(E,u){this.x=E,this.y=u}},C}(),P=function(){var C=15,S=10;function E(i,a,c,d,_,T){this.ctx=i,this.current=new g,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=c,this.canvasFactory=d,this.webGLContext=_,this.imageLayer=T,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new O(this.canvasFactory),i&&b(i),this._cachedGetSinglePixelWidth=null}function u(i,a){if(typeof ImageData!="undefined"&&a instanceof ImageData){i.putImageData(a,0,0);return}var c=a.height,d=a.width,_=c%h,T=(c-_)/h,w=_===0?T:T+1,W=i.createImageData(d,h),G=0,H,$=a.data,X=W.data,Y,K,V,Z;if(a.kind===e.ImageKind.GRAYSCALE_1BPP){var te=$.byteLength,ee=new Uint32Array(X.buffer,0,X.byteLength>>2),le=ee.length,ce=d+7>>3,se=4294967295,he=e.IsLittleEndianCached.value?4278190080:255;for(Y=0;Y<w;Y++){for(V=Y<T?h:_,H=0,K=0;K<V;K++){for(var oe=te-G,ne=0,Ae=oe>ce?d:oe*8-7,ve=Ae&~7,pe=0,ue=0;ne<ve;ne+=8)ue=$[G++],ee[H++]=ue&128?se:he,ee[H++]=ue&64?se:he,ee[H++]=ue&32?se:he,ee[H++]=ue&16?se:he,ee[H++]=ue&8?se:he,ee[H++]=ue&4?se:he,ee[H++]=ue&2?se:he,ee[H++]=ue&1?se:he;for(;ne<Ae;ne++)pe===0&&(ue=$[G++],pe=128),ee[H++]=ue&pe?se:he,pe>>=1}for(;H<le;)ee[H++]=0;i.putImageData(W,0,Y*h)}}else if(a.kind===e.ImageKind.RGBA_32BPP){for(K=0,Z=d*h*4,Y=0;Y<T;Y++)X.set($.subarray(G,G+Z)),G+=Z,i.putImageData(W,0,K),K+=h;Y<w&&(Z=d*_*4,X.set($.subarray(G,G+Z)),i.putImageData(W,0,K))}else if(a.kind===e.ImageKind.RGB_24BPP)for(V=h,Z=d*V,Y=0;Y<w;Y++){for(Y>=T&&(V=_,Z=d*V),H=0,K=Z;K--;)X[H++]=$[G++],X[H++]=$[G++],X[H++]=$[G++],X[H++]=255;i.putImageData(W,0,Y*h)}else throw new Error(`bad image kind: ${a.kind}`)}function t(i,a){for(var c=a.height,d=a.width,_=c%h,T=(c-_)/h,w=_===0?T:T+1,W=i.createImageData(d,h),G=0,H=a.data,$=W.data,X=0;X<w;X++){for(var Y=X<T?h:_,K=3,V=0;V<Y;V++)for(var Z=0,te=0;te<d;te++){if(!Z){var ee=H[G++];Z=128}$[K]=ee&Z?0:255,K+=4,Z>>=1}i.putImageData(W,0,X*h)}}function s(i,a){for(var c=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],d=0,_=c.length;d<_;d++){var T=c[d];i[T]!==void 0&&(a[T]=i[T])}i.setLineDash!==void 0&&(a.setLineDash(i.getLineDash()),a.lineDashOffset=i.lineDashOffset)}function o(i){i.strokeStyle="#000000",i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0)}function p(i,a,c,d){for(var _=i.length,T=3;T<_;T+=4){var w=i[T];if(w===0)i[T-3]=a,i[T-2]=c,i[T-1]=d;else if(w<255){var W=255-w;i[T-3]=i[T-3]*w+a*W>>8,i[T-2]=i[T-2]*w+c*W>>8,i[T-1]=i[T-1]*w+d*W>>8}}}function f(i,a,c){for(var d=i.length,_=1/255,T=3;T<d;T+=4){var w=c?c[i[T]]:i[T];a[T]=a[T]*w*_|0}}function k(i,a,c){for(var d=i.length,_=3;_<d;_+=4){var T=i[_-3]*77+i[_-2]*152+i[_-1]*28;a[_]=c?a[_]*c[T>>8]>>8:a[_]*T>>16}}function x(i,a,c,d,_,T,w){var W=!!T,G=W?T[0]:0,H=W?T[1]:0,$=W?T[2]:0,X;_==="Luminosity"?X=k:X=f;for(var Y=1048576,K=Math.min(d,Math.ceil(Y/c)),V=0;V<d;V+=K){var Z=Math.min(K,d-V),te=i.getImageData(0,V,c,Z),ee=a.getImageData(0,V,c,Z);W&&p(te.data,G,H,$),X(te.data,ee.data,w),i.putImageData(ee,0,V)}}function N(i,a,c,d){var _=a.canvas,T=a.context;i.setTransform(a.scaleX,0,0,a.scaleY,a.offsetX,a.offsetY);var w=a.backdrop||null;if(!a.transferMap&&d.isEnabled){const W=d.composeSMask({layer:c.canvas,mask:_,properties:{subtype:a.subtype,backdrop:w}});i.setTransform(1,0,0,1,0,0),i.drawImage(W,a.offsetX,a.offsetY);return}x(T,c,_.width,_.height,a.subtype,w,a.transferMap),i.drawImage(_,0,0)}var I=["butt","round","square"],L=["miter","round","bevel"],B={},M={};E.prototype={beginDrawing({transform:i,viewport:a,transparency:c=!1,background:d=null}){var _=this.ctx.canvas.width,T=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=d||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,_,T),this.ctx.restore(),c){var w=this.cachedCanvases.getCanvas("transparent",_,T,!0);this.compositeCtx=this.ctx,this.transparentCanvas=w.canvas,this.ctx=w.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),o(this.ctx),i&&this.ctx.transform.apply(this.ctx,i),this.ctx.transform.apply(this.ctx,a.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(a,c,d,_){var T=a.argsArray,w=a.fnArray,W=c||0,G=T.length;if(G===W)return W;for(var H=G-W>S&&typeof d=="function",$=H?Date.now()+C:0,X=0,Y=this.commonObjs,K=this.objs,V;;){if(_!==void 0&&W===_.nextBreakPoint)return _.breakIt(W,d),W;if(V=w[W],V!==e.OPS.dependency)this[V].apply(this,T[W]);else for(const Z of T[W]){const te=Z.startsWith("g_")?Y:K;if(!te.has(Z))return te.get(Z,d),W}if(W++,W===G)return W;if(H&&++X>S){if(Date.now()>$)return d(),W;X=0}}},endDrawing:function(){this.current.activeSMask!==null&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(a){this.current.lineWidth=a,this.ctx.lineWidth=a},setLineCap:function(a){this.ctx.lineCap=I[a]},setLineJoin:function(a){this.ctx.lineJoin=L[a]},setMiterLimit:function(a){this.ctx.miterLimit=a},setDash:function(a,c){var d=this.ctx;d.setLineDash!==void 0&&(d.setLineDash(a),d.lineDashOffset=c)},setRenderingIntent(i){},setFlatness(i){},setGState:function(a){for(var c=0,d=a.length;c<d;c++){var _=a[c],T=_[0],w=_[1];switch(T){case"LW":this.setLineWidth(w);break;case"LC":this.setLineCap(w);break;case"LJ":this.setLineJoin(w);break;case"ML":this.setMiterLimit(w);break;case"D":this.setDash(w[0],w[1]);break;case"RI":this.setRenderingIntent(w);break;case"FL":this.setFlatness(w);break;case"Font":this.setFont(w[0],w[1]);break;case"CA":this.current.strokeAlpha=_[1];break;case"ca":this.current.fillAlpha=_[1],this.ctx.globalAlpha=_[1];break;case"BM":this.ctx.globalCompositeOperation=w;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=w?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break}}},beginSMaskGroup:function(){var a=this.current.activeSMask,c=a.canvas.width,d=a.canvas.height,_="smaskGroupAt"+this.groupLevel,T=this.cachedCanvases.getCanvas(_,c,d,!0),w=this.ctx,W=w.mozCurrentTransform;this.ctx.save();var G=T.context;G.scale(1/a.scaleX,1/a.scaleY),G.translate(-a.offsetX,-a.offsetY),G.transform.apply(G,W),a.startTransformInverse=G.mozCurrentTransformInverse,s(w,G),this.ctx=G,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(w),this.groupLevel++},suspendSMaskGroup:function(){var a=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),N(this.ctx,this.current.activeSMask,a,this.webGLContext),this.ctx.restore(),this.ctx.save(),s(a,this.ctx),this.current.resumeSMaskCtx=a;var c=e.Util.transform(this.current.activeSMask.startTransformInverse,a.mozCurrentTransform);this.ctx.transform.apply(this.ctx,c),a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,a.canvas.width,a.canvas.height),a.restore()},resumeSMaskGroup:function(){var a=this.current.resumeSMaskCtx,c=this.ctx;this.ctx=a,this.groupStack.push(c),this.groupLevel++},endSMaskGroup:function(){var a=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),N(this.ctx,this.current.activeSMask,a,this.webGLContext),this.ctx.restore(),s(a,this.ctx);var c=e.Util.transform(this.current.activeSMask.startTransformInverse,a.mozCurrentTransform);this.ctx.transform.apply(this.ctx,c)},save:function(){this.ctx.save();var a=this.current;this.stateStack.push(a),this.current=a.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),this.current.activeSMask!==null&&(this.stateStack.length===0||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)&&this.endSMaskGroup(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(a,c,d,_,T,w){this.ctx.transform(a,c,d,_,T,w),this._cachedGetSinglePixelWidth=null},constructPath:function(a,c){for(var d=this.ctx,_=this.current,T=_.x,w=_.y,W=0,G=0,H=a.length;W<H;W++)switch(a[W]|0){case e.OPS.rectangle:T=c[G++],w=c[G++];var $=c[G++],X=c[G++];$===0&&($=this.getSinglePixelWidth()),X===0&&(X=this.getSinglePixelWidth());var Y=T+$,K=w+X;this.ctx.moveTo(T,w),this.ctx.lineTo(Y,w),this.ctx.lineTo(Y,K),this.ctx.lineTo(T,K),this.ctx.lineTo(T,w),this.ctx.closePath();break;case e.OPS.moveTo:T=c[G++],w=c[G++],d.moveTo(T,w);break;case e.OPS.lineTo:T=c[G++],w=c[G++],d.lineTo(T,w);break;case e.OPS.curveTo:T=c[G+4],w=c[G+5],d.bezierCurveTo(c[G],c[G+1],c[G+2],c[G+3],T,w),G+=6;break;case e.OPS.curveTo2:d.bezierCurveTo(T,w,c[G],c[G+1],c[G+2],c[G+3]),T=c[G+2],w=c[G+3],G+=4;break;case e.OPS.curveTo3:T=c[G+2],w=c[G+3],d.bezierCurveTo(c[G],c[G+1],T,w,T,w),G+=4;break;case e.OPS.closePath:d.closePath();break}_.setCurrentPoint(T,w)},closePath:function(){this.ctx.closePath()},stroke:function(a){a=typeof a!="undefined"?a:!0;var c=this.ctx,d=this.current.strokeColor;if(c.globalAlpha=this.current.strokeAlpha,d&&d.hasOwnProperty("type")&&d.type==="Pattern"){c.save();const _=c.mozCurrentTransform,T=e.Util.singularValueDecompose2dScale(_)[0];c.strokeStyle=d.getPattern(c,this),c.lineWidth=Math.max(this.getSinglePixelWidth()*m,this.current.lineWidth*T),c.stroke(),c.restore()}else c.lineWidth=Math.max(this.getSinglePixelWidth()*m,this.current.lineWidth),c.stroke();a&&this.consumePath(),c.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(a){a=typeof a!="undefined"?a:!0;var c=this.ctx,d=this.current.fillColor,_=this.current.patternFill,T=!1;_&&(c.save(),this.baseTransform&&c.setTransform.apply(c,this.baseTransform),c.fillStyle=d.getPattern(c,this),T=!0),this.pendingEOFill?(c.fill("evenodd"),this.pendingEOFill=!1):c.fill(),T&&c.restore(),a&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=B},eoClip:function(){this.pendingClip=M},beginText:function(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var a=this.pendingTextPaths,c=this.ctx;if(a===void 0){c.beginPath();return}c.save(),c.beginPath();for(var d=0;d<a.length;d++){var _=a[d];c.setTransform.apply(c,_.transform),c.translate(_.x,_.y),_.addToPath(c,_.fontSize)}c.restore(),c.clip(),c.beginPath(),delete this.pendingTextPaths},setCharSpacing:function(a){this.current.charSpacing=a},setWordSpacing:function(a){this.current.wordSpacing=a},setHScale:function(a){this.current.textHScale=a/100},setLeading:function(a){this.current.leading=-a},setFont:function(a,c){var d=this.commonObjs.get(a),_=this.current;if(!d)throw new Error(`Can't find font for ${a}`);if(_.fontMatrix=d.fontMatrix?d.fontMatrix:e.FONT_IDENTITY_MATRIX,(_.fontMatrix[0]===0||_.fontMatrix[3]===0)&&(0,e.warn)("Invalid font matrix for font "+a),c<0?(c=-c,_.fontDirection=-1):_.fontDirection=1,this.current.font=d,this.current.fontSize=c,d.isType3Font)return;var T=d.loadedName||"sans-serif";let w="normal";d.black?w="900":d.bold&&(w="bold");var W=d.italic?"italic":"normal",G=`"${T}", ${d.fallbackName}`;let H=c;c<F?H=F:c>D&&(H=D),this.current.fontSizeScale=c/H,this.ctx.font=`${W} ${w} ${H}px ${G}`},setTextRenderingMode:function(a){this.current.textRenderingMode=a},setTextRise:function(a){this.current.textRise=a},moveText:function(a,c){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=c},setLeadingMoveText:function(a,c){this.setLeading(-c),this.moveText(a,c)},setTextMatrix:function(a,c,d,_,T,w){this.current.textMatrix=[a,c,d,_,T,w],this.current.textMatrixScale=Math.sqrt(a*a+c*c),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar(i,a,c,d){var _=this.ctx,T=this.current,w=T.font,W=T.textRenderingMode,G=T.fontSize/T.fontSizeScale,H=W&e.TextRenderingMode.FILL_STROKE_MASK,$=!!(W&e.TextRenderingMode.ADD_TO_PATH_FLAG);const X=T.patternFill&&!w.missingFile;var Y;if((w.disableFontFace||$||X)&&(Y=w.getPathGenerator(this.commonObjs,i)),w.disableFontFace||X?(_.save(),_.translate(a,c),_.beginPath(),Y(_,G),d&&_.setTransform.apply(_,d),(H===e.TextRenderingMode.FILL||H===e.TextRenderingMode.FILL_STROKE)&&_.fill(),(H===e.TextRenderingMode.STROKE||H===e.TextRenderingMode.FILL_STROKE)&&_.stroke(),_.restore()):((H===e.TextRenderingMode.FILL||H===e.TextRenderingMode.FILL_STROKE)&&_.fillText(i,a,c),(H===e.TextRenderingMode.STROKE||H===e.TextRenderingMode.FILL_STROKE)&&_.strokeText(i,a,c)),$){var K=this.pendingTextPaths||(this.pendingTextPaths=[]);K.push({transform:_.mozCurrentTransform,x:a,y:c,fontSize:G,addToPath:Y})}},get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);for(var a=i.getImageData(0,0,10,10).data,c=!1,d=3;d<a.length;d+=4)if(a[d]>0&&a[d]<255){c=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",c)},showText:function(a){var c=this.current,d=c.font;if(d.isType3Font)return this.showType3Text(a);var _=c.fontSize;if(_===0)return;var T=this.ctx,w=c.fontSizeScale,W=c.charSpacing,G=c.wordSpacing,H=c.fontDirection,$=c.textHScale*H,X=a.length,Y=d.vertical,K=Y?1:-1,V=d.defaultVMetrics,Z=_*c.fontMatrix[0],te=c.textRenderingMode===e.TextRenderingMode.FILL&&!d.disableFontFace&&!c.patternFill;T.save();let ee;if(c.patternFill){T.save();const ae=c.fillColor.getPattern(T,this);ee=T.mozCurrentTransform,T.restore(),T.fillStyle=ae}T.transform.apply(T,c.textMatrix),T.translate(c.x,c.y+c.textRise),H>0?T.scale($,-1):T.scale($,1);var le=c.lineWidth,ce=c.textMatrixScale;if(ce===0||le===0){var se=c.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(se===e.TextRenderingMode.STROKE||se===e.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,le=this.getSinglePixelWidth()*m)}else le/=ce;w!==1&&(T.scale(w,w),le/=w),T.lineWidth=le;var he=0,oe;for(oe=0;oe<X;++oe){var ne=a[oe];if((0,e.isNum)(ne)){he+=K*ne*_/1e3;continue}var Ae=!1,ve=(ne.isSpace?G:0)+W,pe=ne.fontChar,ue=ne.accent,ge,_e,be,ye,fe=ne.width;if(Y){var z,U,q;z=ne.vmetric||V,U=ne.vmetric?z[1]:fe*.5,U=-U*Z,q=z[2]*Z,fe=z?-z[0]:fe,ge=U/w,_e=(he+q)/w}else ge=he/w,_e=0;if(d.remeasure&&fe>0){var J=T.measureText(pe).width*1e3/_*w;if(fe<J&&this.isFontSubpixelAAEnabled){var re=fe/J;Ae=!0,T.save(),T.scale(re,1),ge/=re}else fe!==J&&(ge+=(fe-J)/2e3*_/w)}(ne.isInFont||d.missingFile)&&(te&&!ue?T.fillText(pe,ge,_e):(this.paintChar(pe,ge,_e,ee),ue&&(be=ge+ue.offset.x/w,ye=_e-ue.offset.y/w,this.paintChar(ue.fontChar,be,ye,ee))));var ie;Y?ie=fe*Z-ve*H:ie=fe*Z+ve*H,he+=ie,Ae&&T.restore()}Y?c.y-=he:c.x+=he*$,T.restore()},showType3Text:function(a){var c=this.ctx,d=this.current,_=d.font,T=d.fontSize,w=d.fontDirection,W=_.vertical?1:-1,G=d.charSpacing,H=d.wordSpacing,$=d.textHScale*w,X=d.fontMatrix||e.FONT_IDENTITY_MATRIX,Y=a.length,K=d.textRenderingMode===e.TextRenderingMode.INVISIBLE,V,Z,te,ee;if(K||T===0)return;for(this._cachedGetSinglePixelWidth=null,c.save(),c.transform.apply(c,d.textMatrix),c.translate(d.x,d.y),c.scale($,w),V=0;V<Y;++V){if(Z=a[V],(0,e.isNum)(Z)){ee=W*Z*T/1e3,this.ctx.translate(ee,0),d.x+=ee*$;continue}var le=(Z.isSpace?H:0)+G,ce=_.charProcOperatorList[Z.operatorListId];if(!ce){(0,e.warn)(`Type3 character "${Z.operatorListId}" is not available.`);continue}this.processingType3=Z,this.save(),c.scale(T,T),c.transform.apply(c,X),this.executeOperatorList(ce),this.restore();var se=e.Util.applyTransform([Z.width,0],X);te=se[0]*T+le,c.translate(te,0),d.x+=te*$}c.restore(),this.processingType3=null},setCharWidth:function(a,c){},setCharWidthAndBounds:function(a,c,d,_,T,w){this.ctx.rect(d,_,T-d,w-_),this.clip(),this.endPath()},getColorN_Pattern:function(a){var c;if(a[0]==="TilingPattern"){var d=a[1],_=this.baseTransform||this.ctx.mozCurrentTransform.slice(),T={createCanvasGraphics:w=>new E(w,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext)};c=new A.TilingPattern(a,d,this.ctx,T,_)}else c=(0,A.getShadingPatternFromIR)(a);return c},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(a,c,d){var _=e.Util.makeCssRgb(a,c,d);this.ctx.strokeStyle=_,this.current.strokeColor=_},setFillRGBColor:function(a,c,d){var _=e.Util.makeCssRgb(a,c,d);this.ctx.fillStyle=_,this.current.fillColor=_,this.current.patternFill=!1},shadingFill:function(a){var c=this.ctx;this.save();var d=(0,A.getShadingPatternFromIR)(a);c.fillStyle=d.getPattern(c,this,!0);var _=c.mozCurrentTransformInverse;if(_){var T=c.canvas,w=T.width,W=T.height,G=e.Util.applyTransform([0,0],_),H=e.Util.applyTransform([0,W],_),$=e.Util.applyTransform([w,0],_),X=e.Util.applyTransform([w,W],_),Y=Math.min(G[0],H[0],$[0],X[0]),K=Math.min(G[1],H[1],$[1],X[1]),V=Math.max(G[0],H[0],$[0],X[0]),Z=Math.max(G[1],H[1],$[1],X[1]);this.ctx.fillRect(Y,K,V-Y,Z-K)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){(0,e.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,e.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(a,c){if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&a.length===6&&this.transform.apply(this,a),this.baseTransform=this.ctx.mozCurrentTransform,c){var d=c[2]-c[0],_=c[3]-c[1];this.ctx.rect(c[0],c[1],d,_),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(a){this.save();var c=this.ctx;a.isolated||(0,e.info)("TODO: Support non-isolated groups."),a.knockout&&(0,e.warn)("Knockout groups not supported.");var d=c.mozCurrentTransform;if(a.matrix&&c.transform.apply(c,a.matrix),!a.bbox)throw new Error("Bounding box is required.");var _=e.Util.getAxialAlignedBoundingBox(a.bbox,c.mozCurrentTransform),T=[0,0,c.canvas.width,c.canvas.height];_=e.Util.intersect(_,T)||[0,0,0,0];var w=Math.floor(_[0]),W=Math.floor(_[1]),G=Math.max(Math.ceil(_[2])-w,1),H=Math.max(Math.ceil(_[3])-W,1),$=1,X=1;G>j&&($=G/j,G=j),H>j&&(X=H/j,H=j);var Y="groupAt"+this.groupLevel;a.smask&&(Y+="_smask_"+this.smaskCounter++%2);var K=this.cachedCanvases.getCanvas(Y,G,H,!0),V=K.context;V.scale(1/$,1/X),V.translate(-w,-W),V.transform.apply(V,d),a.smask?this.smaskStack.push({canvas:K.canvas,context:V,offsetX:w,offsetY:W,scaleX:$,scaleY:X,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(c.setTransform(1,0,0,1,0,0),c.translate(w,W),c.scale($,X)),s(c,V),this.ctx=V,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(c),this.groupLevel++,this.current.activeSMask=null},endGroup:function(a){this.groupLevel--;var c=this.ctx;this.ctx=this.groupStack.pop(),this.ctx.imageSmoothingEnabled!==void 0?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,a.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(c.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(a,c,d){if(this.save(),o(this.ctx),this.current=new g,Array.isArray(a)&&a.length===4){var _=a[2]-a[0],T=a[3]-a[1];this.ctx.rect(a[0],a[1],_,T),this.clip(),this.endPath()}this.transform.apply(this,c),this.transform.apply(this,d)},endAnnotation:function(){this.restore()},paintImageMaskXObject:function(a){var c=this.ctx,d=a.width,_=a.height,T=this.current.fillColor,w=this.current.patternFill,W=this.processingType3;if(W&&W.compiled===void 0&&(d<=v&&_<=v?W.compiled=l({data:a.data,width:d,height:_}):W.compiled=null),W&&W.compiled){W.compiled(c);return}var G=this.cachedCanvases.getCanvas("maskCanvas",d,_),H=G.context;H.save(),t(H,a),H.globalCompositeOperation="source-in",H.fillStyle=w?T.getPattern(H,this):T,H.fillRect(0,0,d,_),H.restore(),this.paintInlineImageXObject(G.canvas)},paintImageMaskXObjectRepeat:function(a,c,d,_){var T=a.width,w=a.height,W=this.current.fillColor,G=this.current.patternFill,H=this.cachedCanvases.getCanvas("maskCanvas",T,w),$=H.context;$.save(),t($,a),$.globalCompositeOperation="source-in",$.fillStyle=G?W.getPattern($,this):W,$.fillRect(0,0,T,w),$.restore();for(var X=this.ctx,Y=0,K=_.length;Y<K;Y+=2)X.save(),X.transform(c,0,0,d,_[Y],_[Y+1]),X.scale(1,-1),X.drawImage(H.canvas,0,0,T,w,0,-1,1,1),X.restore()},paintImageMaskXObjectGroup:function(a){for(var c=this.ctx,d=this.current.fillColor,_=this.current.patternFill,T=0,w=a.length;T<w;T++){var W=a[T],G=W.width,H=W.height,$=this.cachedCanvases.getCanvas("maskCanvas",G,H),X=$.context;X.save(),t(X,W),X.globalCompositeOperation="source-in",X.fillStyle=_?d.getPattern(X,this):d,X.fillRect(0,0,G,H),X.restore(),c.save(),c.transform.apply(c,W.transform),c.scale(1,-1),c.drawImage($.canvas,0,0,G,H,0,-1,1,1),c.restore()}},paintImageXObject:function(a){const c=a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a);if(!c){(0,e.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(c)},paintImageXObjectRepeat:function(a,c,d,_){const T=a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a);if(!T){(0,e.warn)("Dependent image isn't ready yet");return}for(var w=T.width,W=T.height,G=[],H=0,$=_.length;H<$;H+=2)G.push({transform:[c,0,0,d,_[H],_[H+1]],x:0,y:0,w,h:W});this.paintInlineImageXObjectGroup(T,G)},paintInlineImageXObject:function(a){var c=a.width,d=a.height,_=this.ctx;this.save(),_.scale(1/c,-1/d);var T=_.mozCurrentTransformInverse,w=T[0],W=T[1],G=Math.max(Math.sqrt(w*w+W*W),1),H=T[2],$=T[3],X=Math.max(Math.sqrt(H*H+$*$),1),Y,K;if(typeof HTMLElement=="function"&&a instanceof HTMLElement||!a.data)Y=a;else{K=this.cachedCanvases.getCanvas("inlineImage",c,d);var V=K.context;u(V,a),Y=K.canvas}for(var Z=c,te=d,ee="prescale1";G>2&&Z>1||X>2&&te>1;){var le=Z,ce=te;G>2&&Z>1&&(le=Math.ceil(Z/2),G/=Z/le),X>2&&te>1&&(ce=Math.ceil(te/2),X/=te/ce),K=this.cachedCanvases.getCanvas(ee,le,ce),V=K.context,V.clearRect(0,0,le,ce),V.drawImage(Y,0,0,Z,te,0,0,le,ce),Y=K.canvas,Z=le,te=ce,ee=ee==="prescale1"?"prescale2":"prescale1"}if(_.drawImage(Y,0,0,Z,te,0,-d,c,d),this.imageLayer){var se=this.getCanvasPosition(0,-d);this.imageLayer.appendImage({imgData:a,left:se[0],top:se[1],width:c/T[0],height:d/T[3]})}this.restore()},paintInlineImageXObjectGroup:function(a,c){var d=this.ctx,_=a.width,T=a.height,w=this.cachedCanvases.getCanvas("inlineImage",_,T),W=w.context;u(W,a);for(var G=0,H=c.length;G<H;G++){var $=c[G];if(d.save(),d.transform.apply(d,$.transform),d.scale(1,-1),d.drawImage(w.canvas,$.x,$.y,$.w,$.h,0,-1,1,1),this.imageLayer){var X=this.getCanvasPosition($.x,$.y);this.imageLayer.appendImage({imgData:a,left:X[0],top:X[1],width:_,height:T})}d.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,e.warn)("Unsupported 'paintXObject' command.")},markPoint:function(a){},markPointProps:function(a,c){},beginMarkedContent:function(a){},beginMarkedContentProps:function(a,c){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var a=this.ctx;this.pendingClip&&(this.pendingClip===M?a.clip("evenodd"):a.clip(),this.pendingClip=null),a.beginPath()},getSinglePixelWidth(i){if(this._cachedGetSinglePixelWidth===null){const a=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(a,c){var d=this.ctx.mozCurrentTransform;return[d[0]*a+d[2]*c+d[4],d[1]*a+d[3]*c+d[5]]}};for(var n in e.OPS)E.prototype[e.OPS[n]]=E.prototype[n];return E}();r.CanvasGraphics=P},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.getShadingPatternFromIR=j,r.TilingPattern=void 0;var e=y(2),A={};function F(v,h){if(!h||typeof Path2D=="undefined")return;const b=h[2]-h[0],O=h[3]-h[1],l=new Path2D;l.rect(h[0],h[1],b,O),v.clip(l)}A.RadialAxial={fromIR:function(h){var b=h[1],O=h[2],l=h[3],g=h[4],P=h[5],R=h[6],C=h[7];return{type:"Pattern",getPattern:function(E){F(E,O);var u;b==="axial"?u=E.createLinearGradient(g[0],g[1],P[0],P[1]):b==="radial"&&(u=E.createRadialGradient(g[0],g[1],R,P[0],P[1],C));for(var t=0,s=l.length;t<s;++t){var o=l[t];u.addColorStop(o[0],o[1])}return u}}}};var D=function(){function h(l,g,P,R,C,S,E,u){var t=g.coords,s=g.colors,o=l.data,p=l.width*4,f;t[P+1]>t[R+1]&&(f=P,P=R,R=f,f=S,S=E,E=f),t[R+1]>t[C+1]&&(f=R,R=C,C=f,f=E,E=u,u=f),t[P+1]>t[R+1]&&(f=P,P=R,R=f,f=S,S=E,E=f);var k=(t[P]+g.offsetX)*g.scaleX,x=(t[P+1]+g.offsetY)*g.scaleY,N=(t[R]+g.offsetX)*g.scaleX,I=(t[R+1]+g.offsetY)*g.scaleY,L=(t[C]+g.offsetX)*g.scaleX,B=(t[C+1]+g.offsetY)*g.scaleY;if(x>=B)return;for(var M=s[S],n=s[S+1],i=s[S+2],a=s[E],c=s[E+1],d=s[E+2],_=s[u],T=s[u+1],w=s[u+2],W=Math.round(x),G=Math.round(B),H,$,X,Y,K,V,Z,te,ee=W;ee<=G;ee++){if(ee<I){let ne;ee<x?ne=0:x===I?ne=1:ne=(x-ee)/(x-I),H=k-(k-N)*ne,$=M-(M-a)*ne,X=n-(n-c)*ne,Y=i-(i-d)*ne}else{let ne;ee>B?ne=1:I===B?ne=0:ne=(I-ee)/(I-B),H=N-(N-L)*ne,$=a-(a-_)*ne,X=c-(c-T)*ne,Y=d-(d-w)*ne}let oe;ee<x?oe=0:ee>B?oe=1:oe=(x-ee)/(x-B),K=k-(k-L)*oe,V=M-(M-_)*oe,Z=n-(n-T)*oe,te=i-(i-w)*oe;for(var le=Math.round(Math.min(H,K)),ce=Math.round(Math.max(H,K)),se=p*ee+le*4,he=le;he<=ce;he++)oe=(H-he)/(H-K),oe<0?oe=0:oe>1&&(oe=1),o[se++]=$-($-V)*oe|0,o[se++]=X-(X-Z)*oe|0,o[se++]=Y-(Y-te)*oe|0,o[se++]=255}}function b(l,g,P){var R=g.coords,C=g.colors,S,E;switch(g.type){case"lattice":var u=g.verticesPerRow,t=Math.floor(R.length/u)-1,s=u-1;for(S=0;S<t;S++)for(var o=S*u,p=0;p<s;p++,o++)h(l,P,R[o],R[o+1],R[o+u],C[o],C[o+1],C[o+u]),h(l,P,R[o+u+1],R[o+1],R[o+u],C[o+u+1],C[o+1],C[o+u]);break;case"triangles":for(S=0,E=R.length;S<E;S+=3)h(l,P,R[S],R[S+1],R[S+2],C[S],C[S+1],C[S+2]);break;default:throw new Error("illegal figure")}}function O(l,g,P,R,C,S,E,u){var t=1.1,s=3e3,o=2,p=Math.floor(l[0]),f=Math.floor(l[1]),k=Math.ceil(l[2])-p,x=Math.ceil(l[3])-f,N=Math.min(Math.ceil(Math.abs(k*g[0]*t)),s),I=Math.min(Math.ceil(Math.abs(x*g[1]*t)),s),L=k/N,B=x/I,M={coords:P,colors:R,offsetX:-p,offsetY:-f,scaleX:1/L,scaleY:1/B},n=N+o*2,i=I+o*2,a,c,d,_;if(u.isEnabled)a=u.drawFigures({width:N,height:I,backgroundColor:S,figures:C,context:M}),c=E.getCanvas("mesh",n,i,!1),c.context.drawImage(a,o,o),a=c.canvas;else{c=E.getCanvas("mesh",n,i,!1);var T=c.context,w=T.createImageData(N,I);if(S){var W=w.data;for(d=0,_=W.length;d<_;d+=4)W[d]=S[0],W[d+1]=S[1],W[d+2]=S[2],W[d+3]=255}for(d=0;d<C.length;d++)b(w,C[d],M);T.putImageData(w,o,o),a=c.canvas}return{canvas:a,offsetX:p-o*L,offsetY:f-o*B,scaleX:L,scaleY:B}}return O}();A.Mesh={fromIR:function(h){var b=h[2],O=h[3],l=h[4],g=h[5],P=h[6],R=h[7],C=h[8];return{type:"Pattern",getPattern:function(E,u,t){F(E,R);var s;if(t)s=e.Util.singularValueDecompose2dScale(E.mozCurrentTransform);else if(s=e.Util.singularValueDecompose2dScale(u.baseTransform),P){var o=e.Util.singularValueDecompose2dScale(P);s=[s[0]*o[0],s[1]*o[1]]}var p=D(g,s,b,O,l,t?null:C,u.cachedCanvases,u.webGLContext);return t||(E.setTransform.apply(E,u.baseTransform),P&&E.transform.apply(E,P)),E.translate(p.offsetX,p.offsetY),E.scale(p.scaleX,p.scaleY),E.createPattern(p.canvas,"no-repeat")}}}},A.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};function j(v){var h=A[v[0]];if(!h)throw new Error(`Unknown IR type: ${v[0]}`);return h.fromIR(v)}var m=function(){var h={COLORED:1,UNCOLORED:2},b=3e3;function O(l,g,P,R,C){this.operatorList=l[2],this.matrix=l[3]||[1,0,0,1,0,0],this.bbox=l[4],this.xstep=l[5],this.ystep=l[6],this.paintType=l[7],this.tilingType=l[8],this.color=g,this.canvasGraphicsFactory=R,this.baseTransform=C,this.type="Pattern",this.ctx=P}return O.prototype={createPatternCanvas:function(g){var P=this.operatorList,R=this.bbox,C=this.xstep,S=this.ystep,E=this.paintType,u=this.tilingType,t=this.color,s=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+u);var o=R[0],p=R[1],f=R[2],k=R[3],x=e.Util.singularValueDecompose2dScale(this.matrix),N=e.Util.singularValueDecompose2dScale(this.baseTransform),I=[x[0]*N[0],x[1]*N[1]],L=this.getSizeAndScale(C,this.ctx.canvas.width,I[0]),B=this.getSizeAndScale(S,this.ctx.canvas.height,I[1]),M=g.cachedCanvases.getCanvas("pattern",L.size,B.size,!0),n=M.context,i=s.createCanvasGraphics(n);return i.groupLevel=g.groupLevel,this.setFillAndStrokeStyleToContext(i,E,t),i.transform(L.scale,0,0,B.scale,0,0),i.transform(1,0,0,1,-o,-p),this.clipBbox(i,R,o,p,f,k),i.executeOperatorList(P),this.ctx.transform(1,0,0,1,o,p),this.ctx.scale(1/L.scale,1/B.scale),M.canvas},getSizeAndScale:function(g,P,R){g=Math.abs(g);var C=Math.max(b,P),S=Math.ceil(g*R);return S>=C?S=C:R=S/g,{scale:R,size:S}},clipBbox:function(g,P,R,C,S,E){if(Array.isArray(P)&&P.length===4){var u=S-R,t=E-C;g.ctx.rect(R,C,u,t),g.clip(),g.endPath()}},setFillAndStrokeStyleToContext:function(g,P,R){const C=g.ctx,S=g.current;switch(P){case h.COLORED:var E=this.ctx;C.fillStyle=E.fillStyle,C.strokeStyle=E.strokeStyle,S.fillColor=E.fillStyle,S.strokeColor=E.strokeStyle;break;case h.UNCOLORED:var u=e.Util.makeCssRgb(R[0],R[1],R[2]);C.fillStyle=u,C.strokeStyle=u,S.fillColor=u,S.strokeColor=u;break;default:throw new e.FormatError(`Unsupported paint type: ${P}`)}},getPattern:function(g,P){g=this.ctx,g.setTransform.apply(g,this.baseTransform),g.transform.apply(g,this.matrix);var R=this.createPatternCanvas(P);return g.createPattern(R,"repeat")}},O}();r.TilingPattern=m},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalWorkerOptions=void 0;const e=Object.create(null);r.GlobalWorkerOptions=e,e.workerPort=e.workerPort===void 0?null:e.workerPort,e.workerSrc=e.workerSrc===void 0?"":e.workerSrc},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0;var e=y(2);const A={UNKNOWN:0,DATA:1,ERROR:2},F={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function D(m){if(typeof m!="object"||m===null)return m;switch(m.name){case"AbortException":return new e.AbortException(m.message);case"MissingPDFException":return new e.MissingPDFException(m.message);case"UnexpectedResponseException":return new e.UnexpectedResponseException(m.message,m.status);case"UnknownErrorException":return new e.UnknownErrorException(m.message,m.details);default:return new e.UnknownErrorException(m.message,m.toString())}}class j{constructor(v,h,b){this.sourceName=v,this.targetName=h,this.comObj=b,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=O=>{const l=O.data;if(l.targetName!==this.sourceName)return;if(l.stream){this._processStreamMessage(l);return}if(l.callback){const P=l.callbackId,R=this.callbackCapabilities[P];if(!R)throw new Error(`Cannot resolve callback ${P}`);if(delete this.callbackCapabilities[P],l.callback===A.DATA)R.resolve(l.data);else if(l.callback===A.ERROR)R.reject(D(l.reason));else throw new Error("Unexpected callback case");return}const g=this.actionHandler[l.action];if(!g)throw new Error(`Unknown action from worker: ${l.action}`);if(l.callbackId){const P=this.sourceName,R=l.sourceName;new Promise(function(C){C(g(l.data))}).then(function(C){b.postMessage({sourceName:P,targetName:R,callback:A.DATA,callbackId:l.callbackId,data:C})},function(C){b.postMessage({sourceName:P,targetName:R,callback:A.ERROR,callbackId:l.callbackId,reason:D(C)})});return}if(l.streamId){this._createStreamSink(l);return}g(l.data)},b.addEventListener("message",this._onComObjOnMessage)}on(v,h){const b=this.actionHandler;if(b[v])throw new Error(`There is already an actionName called "${v}"`);b[v]=h}send(v,h,b){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:h},b)}sendWithPromise(v,h,b){const O=this.callbackId++,l=(0,e.createPromiseCapability)();this.callbackCapabilities[O]=l;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:O,data:h},b)}catch(g){l.reject(g)}return l.promise}sendWithStream(v,h,b,O){const l=this.streamId++,g=this.sourceName,P=this.targetName,R=this.comObj;return new ReadableStream({start:C=>{const S=(0,e.createPromiseCapability)();return this.streamControllers[l]={controller:C,startCall:S,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:g,targetName:P,action:v,streamId:l,data:h,desiredSize:C.desiredSize},O),S.promise},pull:C=>{const S=(0,e.createPromiseCapability)();return this.streamControllers[l].pullCall=S,R.postMessage({sourceName:g,targetName:P,stream:F.PULL,streamId:l,desiredSize:C.desiredSize}),S.promise},cancel:C=>{(0,e.assert)(C instanceof Error,"cancel must have a valid reason");const S=(0,e.createPromiseCapability)();return this.streamControllers[l].cancelCall=S,this.streamControllers[l].isClosed=!0,R.postMessage({sourceName:g,targetName:P,stream:F.CANCEL,streamId:l,reason:D(C)}),S.promise}},b)}_createStreamSink(v){const h=this,b=this.actionHandler[v.action],O=v.streamId,l=this.sourceName,g=v.sourceName,P=this.comObj,R={enqueue(C,S=1,E){if(this.isCancelled)return;const u=this.desiredSize;this.desiredSize-=S,u>0&&this.desiredSize<=0&&(this.sinkCapability=(0,e.createPromiseCapability)(),this.ready=this.sinkCapability.promise),h._postMessage({sourceName:l,targetName:g,stream:F.ENQUEUE,streamId:O,chunk:C},E)},close(){if(this.isCancelled)return;this.isCancelled=!0,P.postMessage({sourceName:l,targetName:g,stream:F.CLOSE,streamId:O}),delete h.streamSinks[O]},error(C){if((0,e.assert)(C instanceof Error,"error must have a valid reason"),this.isCancelled)return;this.isCancelled=!0,P.postMessage({sourceName:l,targetName:g,stream:F.ERROR,streamId:O,reason:D(C)})},sinkCapability:(0,e.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};R.sinkCapability.resolve(),R.ready=R.sinkCapability.promise,this.streamSinks[O]=R,new Promise(function(C){C(b(v.data,R))}).then(function(){P.postMessage({sourceName:l,targetName:g,stream:F.START_COMPLETE,streamId:O,success:!0})},function(C){P.postMessage({sourceName:l,targetName:g,stream:F.START_COMPLETE,streamId:O,reason:D(C)})})}_processStreamMessage(v){const h=v.streamId,b=this.sourceName,O=v.sourceName,l=this.comObj;switch(v.stream){case F.START_COMPLETE:v.success?this.streamControllers[h].startCall.resolve():this.streamControllers[h].startCall.reject(D(v.reason));break;case F.PULL_COMPLETE:v.success?this.streamControllers[h].pullCall.resolve():this.streamControllers[h].pullCall.reject(D(v.reason));break;case F.PULL:if(!this.streamSinks[h]){l.postMessage({sourceName:b,targetName:O,stream:F.PULL_COMPLETE,streamId:h,success:!0});break}this.streamSinks[h].desiredSize<=0&&v.desiredSize>0&&this.streamSinks[h].sinkCapability.resolve(),this.streamSinks[h].desiredSize=v.desiredSize;const{onPull:g}=this.streamSinks[v.streamId];new Promise(function(R){R(g&&g())}).then(function(){l.postMessage({sourceName:b,targetName:O,stream:F.PULL_COMPLETE,streamId:h,success:!0})},function(R){l.postMessage({sourceName:b,targetName:O,stream:F.PULL_COMPLETE,streamId:h,reason:D(R)})});break;case F.ENQUEUE:if((0,e.assert)(this.streamControllers[h],"enqueue should have stream controller"),this.streamControllers[h].isClosed)break;this.streamControllers[h].controller.enqueue(v.chunk);break;case F.CLOSE:if((0,e.assert)(this.streamControllers[h],"close should have stream controller"),this.streamControllers[h].isClosed)break;this.streamControllers[h].isClosed=!0,this.streamControllers[h].controller.close(),this._deleteStreamController(h);break;case F.ERROR:(0,e.assert)(this.streamControllers[h],"error should have stream controller"),this.streamControllers[h].controller.error(D(v.reason)),this._deleteStreamController(h);break;case F.CANCEL_COMPLETE:v.success?this.streamControllers[h].cancelCall.resolve():this.streamControllers[h].cancelCall.reject(D(v.reason)),this._deleteStreamController(h);break;case F.CANCEL:if(!this.streamSinks[h])break;const{onCancel:P}=this.streamSinks[v.streamId];new Promise(function(R){R(P&&P(D(v.reason)))}).then(function(){l.postMessage({sourceName:b,targetName:O,stream:F.CANCEL_COMPLETE,streamId:h,success:!0})},function(R){l.postMessage({sourceName:b,targetName:O,stream:F.CANCEL_COMPLETE,streamId:h,reason:D(R)})}),this.streamSinks[h].sinkCapability.reject(D(v.reason)),this.streamSinks[h].isCancelled=!0,delete this.streamSinks[h];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(v){await Promise.allSettled([this.streamControllers[v].startCall,this.streamControllers[v].pullCall,this.streamControllers[v].cancelCall].map(function(h){return h&&h.promise})),delete this.streamControllers[v]}_postMessage(v,h){h&&this.postMessageTransfers?this.comObj.postMessage(v,h):this.comObj.postMessage(v)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}r.MessageHandler=j},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var e=y(2),A=y(13);class F{constructor(j){(0,e.assert)(typeof j=="string","Metadata: input is not a string"),j=this._repair(j);const m=new A.SimpleXMLParser,v=m.parseFromString(j);this._metadataMap=new Map,v&&this._parse(v)}_repair(j){return j.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,function(m,v){const h=v.replace(/\\([0-3])([0-7])([0-7])/g,function(O,l,g,P){return String.fromCharCode(l*64+g*8+P*1)}).replace(/&(amp|apos|gt|lt|quot);/g,function(O,l){switch(l){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${l} isn't defined.`)});let b="";for(let O=0,l=h.length;O<l;O+=2){const g=h.charCodeAt(O)*256+h.charCodeAt(O+1);g>=32&&g<127&&g!==60&&g!==62&&g!==38?b+=String.fromCharCode(g):b+="&#x"+(65536+g).toString(16).substring(1)+";"}return">"+b})}_parse(j){let m=j.documentElement;if(m.nodeName.toLowerCase()!=="rdf:rdf")for(m=m.firstChild;m&&m.nodeName.toLowerCase()!=="rdf:rdf";)m=m.nextSibling;const v=m?m.nodeName.toLowerCase():null;if(!m||v!=="rdf:rdf"||!m.hasChildNodes())return;const h=m.childNodes;for(let b=0,O=h.length;b<O;b++){const l=h[b];if(l.nodeName.toLowerCase()!=="rdf:description")continue;for(let g=0,P=l.childNodes.length;g<P;g++)if(l.childNodes[g].nodeName.toLowerCase()!=="#text"){const R=l.childNodes[g],C=R.nodeName.toLowerCase();this._metadataMap.set(C,R.textContent.trim())}}}get(j){return this._metadataMap.has(j)?this._metadataMap.get(j):null}getAll(){const j=Object.create(null);for(const[m,v]of this._metadataMap)j[m]=v;return j}has(j){return this._metadataMap.has(j)}}r.Metadata=F},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.SimpleXMLParser=void 0;const e={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function A(v,h){const b=v[h];return b===" "||b===`
`||b==="\r"||b==="	"}function F(v){for(let h=0,b=v.length;h<b;h++)if(!A(v,h))return!1;return!0}class D{_resolveEntities(h){return h.replace(/&([^;]+);/g,(b,O)=>{if(O.substring(0,2)==="#x")return String.fromCharCode(parseInt(O.substring(2),16));if(O.substring(0,1)==="#")return String.fromCharCode(parseInt(O.substring(1),10));switch(O){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(O)})}_parseContent(h,b){const O=[];let l=b;function g(){for(;l<h.length&&A(h,l);)++l}for(;l<h.length&&!A(h,l)&&h[l]!==">"&&h[l]!=="/";)++l;const P=h.substring(b,l);for(g();l<h.length&&h[l]!==">"&&h[l]!=="/"&&h[l]!=="?";){g();let R="",C="";for(;l<h.length&&!A(h,l)&&h[l]!=="=";)R+=h[l],++l;if(g(),h[l]!=="=")return null;++l,g();const S=h[l];if(S!=='"'&&S!=="'")return null;const E=h.indexOf(S,++l);if(E<0)return null;C=h.substring(l,E),O.push({name:R,value:this._resolveEntities(C)}),l=E+1,g()}return{name:P,attributes:O,parsed:l-b}}_parseProcessingInstruction(h,b){let O=b;function l(){for(;O<h.length&&A(h,O);)++O}for(;O<h.length&&!A(h,O)&&h[O]!==">"&&h[O]!=="/";)++O;const g=h.substring(b,O);l();const P=O;for(;O<h.length&&(h[O]!=="?"||h[O+1]!==">");)++O;const R=h.substring(P,O);return{name:g,value:R,parsed:O-b}}parseXml(h){let b=0;for(;b<h.length;){const O=h[b];let l=b;if(O==="<"){++l;const g=h[l];let P;switch(g){case"/":if(++l,P=h.indexOf(">",l),P<0){this.onError(e.UnterminatedElement);return}this.onEndElement(h.substring(l,P)),l=P+1;break;case"?":++l;const R=this._parseProcessingInstruction(h,l);if(h.substring(l+R.parsed,l+R.parsed+2)!=="?>"){this.onError(e.UnterminatedXmlDeclaration);return}this.onPi(R.name,R.value),l+=R.parsed+2;break;case"!":if(h.substring(l+1,l+3)==="--"){if(P=h.indexOf("-->",l+3),P<0){this.onError(e.UnterminatedComment);return}this.onComment(h.substring(l+3,P)),l=P+3}else if(h.substring(l+1,l+8)==="[CDATA["){if(P=h.indexOf("]]>",l+8),P<0){this.onError(e.UnterminatedCdat);return}this.onCdata(h.substring(l+8,P)),l=P+3}else if(h.substring(l+1,l+8)==="DOCTYPE"){const E=h.indexOf("[",l+8);let u=!1;if(P=h.indexOf(">",l+8),P<0){this.onError(e.UnterminatedDoctypeDeclaration);return}if(E>0&&P>E){if(P=h.indexOf("]>",l+8),P<0){this.onError(e.UnterminatedDoctypeDeclaration);return}u=!0}const t=h.substring(l+8,P+(u?1:0));this.onDoctype(t),l=P+(u?2:1)}else{this.onError(e.MalformedElement);return}break;default:const C=this._parseContent(h,l);if(C===null){this.onError(e.MalformedElement);return}let S=!1;if(h.substring(l+C.parsed,l+C.parsed+2)==="/>")S=!0;else if(h.substring(l+C.parsed,l+C.parsed+1)!==">"){this.onError(e.UnterminatedElement);return}this.onBeginElement(C.name,C.attributes,S),l+=C.parsed+(S?2:1);break}}else{for(;l<h.length&&h[l]!=="<";)l++;const g=h.substring(b,l);this.onText(this._resolveEntities(g))}b=l}}onResolveEntity(h){return`&${h};`}onPi(h,b){}onComment(h){}onCdata(h){}onDoctype(h){}onText(h){}onBeginElement(h,b,O){}onEndElement(h){}onError(h){}}class j{constructor(h,b){this.nodeName=h,this.nodeValue=b,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const h=this.parentNode.childNodes;if(!h)return;const b=h.indexOf(this);return b===-1?void 0:h[b+1]}get textContent(){return this.childNodes?this.childNodes.map(function(h){return h.textContent}).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}}class m extends D{constructor(){super();this._currentFragment=null,this._stack=null,this._errorCode=e.NoError}parseFromString(h){if(this._currentFragment=[],this._stack=[],this._errorCode=e.NoError,this.parseXml(h),this._errorCode!==e.NoError)return;const[b]=this._currentFragment;return b?{documentElement:b}:void 0}onResolveEntity(h){switch(h){case"apos":return"'"}return super.onResolveEntity(h)}onText(h){if(F(h))return;const b=new j("#text",h);this._currentFragment.push(b)}onCdata(h){const b=new j("#text",h);this._currentFragment.push(b)}onBeginElement(h,b,O){const l=new j(h);if(l.childNodes=[],this._currentFragment.push(l),O)return;this._stack.push(this._currentFragment),this._currentFragment=l.childNodes}onEndElement(h){this._currentFragment=this._stack.pop()||[];const b=this._currentFragment[this._currentFragment.length-1];if(!b)return;for(let O=0,l=b.childNodes.length;O<l;O++)b.childNodes[O].parentNode=b}onError(h){this._errorCode=h}}r.SimpleXMLParser=m},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDataTransportStream=void 0;var e=y(2);class A{constructor(m,v){(0,e.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=m.progressiveDone||!1;const h=m.initialData;if(h&&h.length>0){const b=new Uint8Array(h).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._contentLength=m.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,O)=>{this._onReceiveData({begin:b,chunk:O})}),this._pdfDataRangeTransport.addProgressListener((b,O)=>{this._onProgress({loaded:b,total:O})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(m){const v=new Uint8Array(m.chunk).buffer;if(m.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(v):this._queuedChunks.push(v);else{const h=this._rangeReaders.some(function(b){return b._begin!==m.begin?!1:(b._enqueue(v),!0)});(0,e.assert)(h,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}_onProgress(m){if(m.total===void 0){const v=this._rangeReaders[0];v&&v.onProgress&&v.onProgress({loaded:m.loaded})}else{const v=this._fullRequestReader;v&&v.onProgress&&v.onProgress({loaded:m.loaded,total:m.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(m){const v=this._rangeReaders.indexOf(m);v>=0&&this._rangeReaders.splice(v,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const m=this._queuedChunks;return this._queuedChunks=null,new F(this,m,this._progressiveDone)}getRangeReader(m,v){if(v<=this._progressiveDataLength)return null;const h=new D(this,m,v);return this._pdfDataRangeTransport.requestDataRange(m,v),this._rangeReaders.push(h),h}cancelAllRequests(m){this._fullRequestReader&&this._fullRequestReader.cancel(m);const v=this._rangeReaders.slice(0);v.forEach(function(h){h.cancel(m)}),this._pdfDataRangeTransport.abort()}}r.PDFDataTransportStream=A;class F{constructor(m,v,h=!1){this._stream=m,this._done=h||!1,this._filename=null,this._queuedChunks=v||[],this._loaded=0;for(const b of this._queuedChunks)this._loaded+=b.byteLength;this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null}_enqueue(m){if(this._done)return;if(this._requests.length>0){const v=this._requests.shift();v.resolve({value:m,done:!1})}else this._queuedChunks.push(m);this._loaded+=m.byteLength}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){const v=this._queuedChunks.shift();return{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const m=(0,e.createPromiseCapability)();return this._requests.push(m),m.promise}cancel(m){this._done=!0,this._requests.forEach(function(v){v.resolve({value:void 0,done:!0})}),this._requests=[]}progressiveDone(){if(this._done)return;this._done=!0}}class D{constructor(m,v,h){this._stream=m,this._begin=v,this._end=h,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(m){if(this._done)return;if(this._requests.length===0)this._queuedChunk=m;else{const v=this._requests.shift();v.resolve({value:m,done:!1}),this._requests.forEach(function(h){h.resolve({value:void 0,done:!0})}),this._requests=[]}this._done=!0,this._stream._removeRangeReader(this)}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const m=(0,e.createPromiseCapability)();return this._requests.push(m),m.promise}cancel(m){this._done=!0,this._requests.forEach(function(v){v.resolve({value:void 0,done:!0})}),this._requests=[],this._stream._removeRangeReader(this)}}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.WebGLContext=void 0;var e=y(2);class A{constructor({enable:j=!1}){this._enabled=j===!0}get isEnabled(){let j=this._enabled;return j&&(j=F.tryInitGL()),(0,e.shadow)(this,"isEnabled",j)}composeSMask({layer:j,mask:m,properties:v}){return F.composeSMask(j,m,v)}drawFigures({width:j,height:m,backgroundColor:v,figures:h,context:b}){return F.drawFigures(j,m,v,h,b)}clear(){F.cleanup()}}r.WebGLContext=A;var F=function(){function j(f,k,x){var N=f.createShader(x);f.shaderSource(N,k),f.compileShader(N);var I=f.getShaderParameter(N,f.COMPILE_STATUS);if(!I){var L=f.getShaderInfoLog(N);throw new Error("Error during shader compilation: "+L)}return N}function m(f,k){return j(f,k,f.VERTEX_SHADER)}function v(f,k){return j(f,k,f.FRAGMENT_SHADER)}function h(f,k){for(var x=f.createProgram(),N=0,I=k.length;N<I;++N)f.attachShader(x,k[N]);f.linkProgram(x);var L=f.getProgramParameter(x,f.LINK_STATUS);if(!L){var B=f.getProgramInfoLog(x);throw new Error("Error during program linking: "+B)}return x}function b(f,k,x){f.activeTexture(x);var N=f.createTexture();return f.bindTexture(f.TEXTURE_2D,N),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,k),N}var O,l;function g(){if(O)return;l=document.createElement("canvas"),O=l.getContext("webgl",{premultipliedalpha:!1})}var P="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",R="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",C=null;function S(){var f,k;g(),f=l,l=null,k=O,O=null;var x=m(k,P),N=v(k,R),I=h(k,[x,N]);k.useProgram(I);var L={};L.gl=k,L.canvas=f,L.resolutionLocation=k.getUniformLocation(I,"u_resolution"),L.positionLocation=k.getAttribLocation(I,"a_position"),L.backdropLocation=k.getUniformLocation(I,"u_backdrop"),L.subtypeLocation=k.getUniformLocation(I,"u_subtype");var B=k.getAttribLocation(I,"a_texCoord"),M=k.getUniformLocation(I,"u_image"),n=k.getUniformLocation(I,"u_mask"),i=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,i),k.bufferData(k.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),k.STATIC_DRAW),k.enableVertexAttribArray(B),k.vertexAttribPointer(B,2,k.FLOAT,!1,0,0),k.uniform1i(M,0),k.uniform1i(n,1),C=L}function E(f,k,x){var N=f.width,I=f.height;C||S();var L=C,B=L.canvas,M=L.gl;B.width=N,B.height=I,M.viewport(0,0,M.drawingBufferWidth,M.drawingBufferHeight),M.uniform2f(L.resolutionLocation,N,I),x.backdrop?M.uniform4f(L.resolutionLocation,x.backdrop[0],x.backdrop[1],x.backdrop[2],1):M.uniform4f(L.resolutionLocation,0,0,0,0),M.uniform1i(L.subtypeLocation,x.subtype==="Luminosity"?1:0);var n=b(M,f,M.TEXTURE0),i=b(M,k,M.TEXTURE1),a=M.createBuffer();return M.bindBuffer(M.ARRAY_BUFFER,a),M.bufferData(M.ARRAY_BUFFER,new Float32Array([0,0,N,0,0,I,0,I,N,0,N,I]),M.STATIC_DRAW),M.enableVertexAttribArray(L.positionLocation),M.vertexAttribPointer(L.positionLocation,2,M.FLOAT,!1,0,0),M.clearColor(0,0,0,0),M.enable(M.BLEND),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.clear(M.COLOR_BUFFER_BIT),M.drawArrays(M.TRIANGLES,0,6),M.flush(),M.deleteTexture(n),M.deleteTexture(i),M.deleteBuffer(a),B}var u="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",t="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",s=null;function o(){var f,k;g(),f=l,l=null,k=O,O=null;var x=m(k,u),N=v(k,t),I=h(k,[x,N]);k.useProgram(I);var L={};L.gl=k,L.canvas=f,L.resolutionLocation=k.getUniformLocation(I,"u_resolution"),L.scaleLocation=k.getUniformLocation(I,"u_scale"),L.offsetLocation=k.getUniformLocation(I,"u_offset"),L.positionLocation=k.getAttribLocation(I,"a_position"),L.colorLocation=k.getAttribLocation(I,"a_color"),s=L}function p(f,k,x,N,I){s||o();var L=s,B=L.canvas,M=L.gl;B.width=f,B.height=k,M.viewport(0,0,M.drawingBufferWidth,M.drawingBufferHeight),M.uniform2f(L.resolutionLocation,f,k);var n=0,i,a,c;for(i=0,a=N.length;i<a;i++)switch(N[i].type){case"lattice":c=N[i].coords.length/N[i].verticesPerRow|0,n+=(c-1)*(N[i].verticesPerRow-1)*6;break;case"triangles":n+=N[i].coords.length;break}var d=new Float32Array(n*2),_=new Uint8Array(n*3),T=I.coords,w=I.colors,W=0,G=0;for(i=0,a=N.length;i<a;i++){var H=N[i],$=H.coords,X=H.colors;switch(H.type){case"lattice":var Y=H.verticesPerRow;c=$.length/Y|0;for(var K=1;K<c;K++)for(var V=K*Y+1,Z=1;Z<Y;Z++,V++)d[W]=T[$[V-Y-1]],d[W+1]=T[$[V-Y-1]+1],d[W+2]=T[$[V-Y]],d[W+3]=T[$[V-Y]+1],d[W+4]=T[$[V-1]],d[W+5]=T[$[V-1]+1],_[G]=w[X[V-Y-1]],_[G+1]=w[X[V-Y-1]+1],_[G+2]=w[X[V-Y-1]+2],_[G+3]=w[X[V-Y]],_[G+4]=w[X[V-Y]+1],_[G+5]=w[X[V-Y]+2],_[G+6]=w[X[V-1]],_[G+7]=w[X[V-1]+1],_[G+8]=w[X[V-1]+2],d[W+6]=d[W+2],d[W+7]=d[W+3],d[W+8]=d[W+4],d[W+9]=d[W+5],d[W+10]=T[$[V]],d[W+11]=T[$[V]+1],_[G+9]=_[G+3],_[G+10]=_[G+4],_[G+11]=_[G+5],_[G+12]=_[G+6],_[G+13]=_[G+7],_[G+14]=_[G+8],_[G+15]=w[X[V]],_[G+16]=w[X[V]+1],_[G+17]=w[X[V]+2],W+=12,G+=18;break;case"triangles":for(var te=0,ee=$.length;te<ee;te++)d[W]=T[$[te]],d[W+1]=T[$[te]+1],_[G]=w[X[te]],_[G+1]=w[X[te]+1],_[G+2]=w[X[te]+2],W+=2,G+=3;break}}x?M.clearColor(x[0]/255,x[1]/255,x[2]/255,1):M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT);var le=M.createBuffer();M.bindBuffer(M.ARRAY_BUFFER,le),M.bufferData(M.ARRAY_BUFFER,d,M.STATIC_DRAW),M.enableVertexAttribArray(L.positionLocation),M.vertexAttribPointer(L.positionLocation,2,M.FLOAT,!1,0,0);var ce=M.createBuffer();return M.bindBuffer(M.ARRAY_BUFFER,ce),M.bufferData(M.ARRAY_BUFFER,_,M.STATIC_DRAW),M.enableVertexAttribArray(L.colorLocation),M.vertexAttribPointer(L.colorLocation,3,M.UNSIGNED_BYTE,!1,0,0),M.uniform2f(L.scaleLocation,I.scaleX,I.scaleY),M.uniform2f(L.offsetLocation,I.offsetX,I.offsetY),M.drawArrays(M.TRIANGLES,0,n),M.flush(),M.deleteBuffer(le),M.deleteBuffer(ce),B}return{tryInitGL(){try{return g(),!!O}catch(f){}return!1},composeSMask:E,drawFigures:p,cleanup(){C&&C.canvas&&(C.canvas.width=0,C.canvas.height=0),s&&s.canvas&&(s.canvas.width=0,s.canvas.height=0),C=null,s=null}}}()},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationLayer=void 0;var e=y(1),A=y(2);class F{static create(n){const i=n.data.annotationType;switch(i){case A.AnnotationType.LINK:return new j(n);case A.AnnotationType.TEXT:return new m(n);case A.AnnotationType.WIDGET:const a=n.data.fieldType;switch(a){case"Tx":return new h(n);case"Btn":return n.data.radioButton?new O(n):n.data.checkBox?new b(n):new l(n);case"Ch":return new g(n)}return new v(n);case A.AnnotationType.POPUP:return new P(n);case A.AnnotationType.FREETEXT:return new C(n);case A.AnnotationType.LINE:return new S(n);case A.AnnotationType.SQUARE:return new E(n);case A.AnnotationType.CIRCLE:return new u(n);case A.AnnotationType.POLYLINE:return new t(n);case A.AnnotationType.CARET:return new o(n);case A.AnnotationType.INK:return new p(n);case A.AnnotationType.POLYGON:return new s(n);case A.AnnotationType.HIGHLIGHT:return new f(n);case A.AnnotationType.UNDERLINE:return new k(n);case A.AnnotationType.SQUIGGLY:return new x(n);case A.AnnotationType.STRIKEOUT:return new N(n);case A.AnnotationType.STAMP:return new I(n);case A.AnnotationType.FILEATTACHMENT:return new L(n);default:return new D(n)}}}class D{constructor(n,i=!1,a=!1){this.isRenderable=i,this.data=n.data,this.layer=n.layer,this.page=n.page,this.viewport=n.viewport,this.linkService=n.linkService,this.downloadManager=n.downloadManager,this.imageResourcesPath=n.imageResourcesPath,this.renderInteractiveForms=n.renderInteractiveForms,this.svgFactory=n.svgFactory,i&&(this.container=this._createContainer(a))}_createContainer(n=!1){const i=this.data,a=this.page,c=this.viewport,d=document.createElement("section");let _=i.rect[2]-i.rect[0],T=i.rect[3]-i.rect[1];d.setAttribute("data-annotation-id",i.id);const w=A.Util.normalizeRect([i.rect[0],a.view[3]-i.rect[1]+a.view[1],i.rect[2],a.view[3]-i.rect[3]+a.view[1]]);if(d.style.transform=`matrix(${c.transform.join(",")})`,d.style.transformOrigin=`-${w[0]}px -${w[1]}px`,!n&&i.borderStyle.width>0){d.style.borderWidth=`${i.borderStyle.width}px`,i.borderStyle.style!==A.AnnotationBorderStyleType.UNDERLINE&&(_=_-2*i.borderStyle.width,T=T-2*i.borderStyle.width);const W=i.borderStyle.horizontalCornerRadius,G=i.borderStyle.verticalCornerRadius;if(W>0||G>0){const H=`${W}px / ${G}px`;d.style.borderRadius=H}switch(i.borderStyle.style){case A.AnnotationBorderStyleType.SOLID:d.style.borderStyle="solid";break;case A.AnnotationBorderStyleType.DASHED:d.style.borderStyle="dashed";break;case A.AnnotationBorderStyleType.BEVELED:(0,A.warn)("Unimplemented border style: beveled");break;case A.AnnotationBorderStyleType.INSET:(0,A.warn)("Unimplemented border style: inset");break;case A.AnnotationBorderStyleType.UNDERLINE:d.style.borderBottomStyle="solid";break}i.color?d.style.borderColor=A.Util.makeCssRgb(i.color[0]|0,i.color[1]|0,i.color[2]|0):d.style.borderWidth=0}return d.style.left=`${w[0]}px`,d.style.top=`${w[1]}px`,d.style.width=`${_}px`,d.style.height=`${T}px`,d}_createPopup(n,i,a){i||(i=document.createElement("div"),i.style.height=n.style.height,i.style.width=n.style.width,n.appendChild(i));const c=new R({container:n,trigger:i,color:a.color,title:a.title,modificationDate:a.modificationDate,contents:a.contents,hideWrapper:!0}),d=c.render();d.style.left=n.style.width,n.appendChild(d)}render(){(0,A.unreachable)("Abstract method `AnnotationElement.render` called")}}class j extends D{constructor(n){const i=!!(n.data.url||n.data.dest||n.data.action);super(n,i)}render(){this.container.className="linkAnnotation";const{data:n,linkService:i}=this,a=document.createElement("a");return n.url?(0,e.addLinkAttributes)(a,{url:n.url,target:n.newWindow?e.LinkTarget.BLANK:i.externalLinkTarget,rel:i.externalLinkRel,enabled:i.externalLinkEnabled}):n.action?this._bindNamedAction(a,n.action):this._bindLink(a,n.dest),this.container.appendChild(a),this.container}_bindLink(n,i){n.href=this.linkService.getDestinationHash(i),n.onclick=()=>(i&&this.linkService.navigateTo(i),!1),i&&(n.className="internalLink")}_bindNamedAction(n,i){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(i),!1),n.className="internalLink"}}class m extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i)}render(){this.container.className="textAnnotation";const n=document.createElement("img");return n.style.height=this.container.style.height,n.style.width=this.container.style.width,n.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",n.alt="[{{type}} Annotation]",n.dataset.l10nId="text_annotation_type",n.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,n,this.data),this.container.appendChild(n),this.container}}class v extends D{render(){return this.container}}class h extends v{constructor(n){const i=n.renderInteractiveForms||!n.data.hasAppearance&&!!n.data.fieldValue;super(n,i)}render(){const n=["left","center","right"];this.container.className="textWidgetAnnotation";let i=null;if(this.renderInteractiveForms){if(this.data.multiLine?(i=document.createElement("textarea"),i.textContent=this.data.fieldValue):(i=document.createElement("input"),i.type="text",i.setAttribute("value",this.data.fieldValue)),i.disabled=this.data.readOnly,i.name=this.data.fieldName,this.data.maxLen!==null&&(i.maxLength=this.data.maxLen),this.data.comb){const a=this.data.rect[2]-this.data.rect[0],c=a/this.data.maxLen;i.classList.add("comb"),i.style.letterSpacing=`calc(${c}px - 1ch)`}}else{i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell";let a=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(a=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(i,a)}return this.data.textAlignment!==null&&(i.style.textAlign=n[this.data.textAlignment]),this.container.appendChild(i),this.container}_setTextStyle(n,i){const a=n.style;if(a.fontSize=`${this.data.fontSize}px`,a.direction=this.data.fontDirection<0?"rtl":"ltr",!i)return;let c="normal";i.black?c="900":i.bold&&(c="bold"),a.fontWeight=c,a.fontStyle=i.italic?"italic":"normal";const d=i.loadedName?`"${i.loadedName}", `:"",_=i.fallbackName||"Helvetica, sans-serif";a.fontFamily=d+_}}class b extends v{constructor(n){super(n,n.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation checkBox";const n=document.createElement("input");return n.disabled=this.data.readOnly,n.type="checkbox",n.name=this.data.fieldName,this.data.fieldValue&&this.data.fieldValue!=="Off"&&n.setAttribute("checked",!0),this.container.appendChild(n),this.container}}class O extends v{constructor(n){super(n,n.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation radioButton";const n=document.createElement("input");return n.disabled=this.data.readOnly,n.type="radio",n.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&n.setAttribute("checked",!0),this.container.appendChild(n),this.container}}class l extends j{render(){const n=super.render();return n.className="buttonWidgetAnnotation pushButton",n}}class g extends v{constructor(n){super(n,n.renderInteractiveForms)}render(){this.container.className="choiceWidgetAnnotation";const n=document.createElement("select");n.disabled=this.data.readOnly,n.name=this.data.fieldName,this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0));for(const i of this.data.options){const a=document.createElement("option");a.textContent=i.displayValue,a.value=i.exportValue,this.data.fieldValue.includes(i.displayValue)&&a.setAttribute("selected",!0),n.appendChild(a)}return this.container.appendChild(n),this.container}}class P extends D{constructor(n){const i=!!(n.data.title||n.data.contents);super(n,i)}render(){const n=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",n.includes(this.data.parentType))return this.container;const i=`[data-annotation-id="${this.data.parentId}"]`,a=this.layer.querySelector(i);if(!a)return this.container;const c=new R({container:this.container,trigger:a,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),d=parseFloat(a.style.left),_=parseFloat(a.style.width);return this.container.style.transformOrigin=`-${d+_}px -${a.style.top}`,this.container.style.left=`${d+_}px`,this.container.appendChild(c.render()),this.container}}class R{constructor(n){this.container=n.container,this.trigger=n.trigger,this.color=n.color,this.title=n.title,this.modificationDate=n.modificationDate,this.contents=n.contents,this.hideWrapper=n.hideWrapper||!1,this.pinned=!1}render(){const n=.7,i=document.createElement("div");i.className="popupWrapper",this.hideElement=this.hideWrapper?i:this.container,this.hideElement.setAttribute("hidden",!0);const a=document.createElement("div");a.className="popup";const c=this.color;if(c){const w=n*(255-c[0])+c[0],W=n*(255-c[1])+c[1],G=n*(255-c[2])+c[2];a.style.backgroundColor=A.Util.makeCssRgb(w|0,W|0,G|0)}const d=document.createElement("h1");d.textContent=this.title,a.appendChild(d);const _=e.PDFDateString.toDateObject(this.modificationDate);if(_){const w=document.createElement("span");w.textContent="{{date}}, {{time}}",w.dataset.l10nId="annotation_date_string",w.dataset.l10nArgs=JSON.stringify({date:_.toLocaleDateString(),time:_.toLocaleTimeString()}),a.appendChild(w)}const T=this._formatContents(this.contents);return a.appendChild(T),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),a.addEventListener("click",this._hide.bind(this,!0)),i.appendChild(a),i}_formatContents(n){const i=document.createElement("p"),a=n.split(/(?:\r\n?|\n)/);for(let c=0,d=a.length;c<d;++c){const _=a[c];i.appendChild(document.createTextNode(_)),c<d-1&&i.appendChild(document.createElement("br"))}return i}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(n=!1){n&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}_hide(n=!0){n&&(this.pinned=!1),!this.hideElement.hasAttribute("hidden")&&!this.pinned&&(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}class C extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0)}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class S extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0)}render(){this.container.className="lineAnnotation";const n=this.data,i=n.rect[2]-n.rect[0],a=n.rect[3]-n.rect[1],c=this.svgFactory.create(i,a),d=this.svgFactory.createElement("svg:line");return d.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),d.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),d.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),d.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),d.setAttribute("stroke-width",n.borderStyle.width||1),d.setAttribute("stroke","transparent"),c.appendChild(d),this.container.append(c),this._createPopup(this.container,d,n),this.container}}class E extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0)}render(){this.container.className="squareAnnotation";const n=this.data,i=n.rect[2]-n.rect[0],a=n.rect[3]-n.rect[1],c=this.svgFactory.create(i,a),d=n.borderStyle.width,_=this.svgFactory.createElement("svg:rect");return _.setAttribute("x",d/2),_.setAttribute("y",d/2),_.setAttribute("width",i-d),_.setAttribute("height",a-d),_.setAttribute("stroke-width",d||1),_.setAttribute("stroke","transparent"),_.setAttribute("fill","none"),c.appendChild(_),this.container.append(c),this._createPopup(this.container,_,n),this.container}}class u extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0)}render(){this.container.className="circleAnnotation";const n=this.data,i=n.rect[2]-n.rect[0],a=n.rect[3]-n.rect[1],c=this.svgFactory.create(i,a),d=n.borderStyle.width,_=this.svgFactory.createElement("svg:ellipse");return _.setAttribute("cx",i/2),_.setAttribute("cy",a/2),_.setAttribute("rx",i/2-d/2),_.setAttribute("ry",a/2-d/2),_.setAttribute("stroke-width",d||1),_.setAttribute("stroke","transparent"),_.setAttribute("fill","none"),c.appendChild(_),this.container.append(c),this._createPopup(this.container,_,n),this.container}}class t extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,i=n.rect[2]-n.rect[0],a=n.rect[3]-n.rect[1],c=this.svgFactory.create(i,a);let d=[];for(const T of n.vertices){const w=T.x-n.rect[0],W=n.rect[3]-T.y;d.push(w+","+W)}d=d.join(" ");const _=this.svgFactory.createElement(this.svgElementName);return _.setAttribute("points",d),_.setAttribute("stroke-width",n.borderStyle.width||1),_.setAttribute("stroke","transparent"),_.setAttribute("fill","none"),c.appendChild(_),this.container.append(c),this._createPopup(this.container,_,n),this.container}}class s extends t{constructor(n){super(n);this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class o extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0)}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class p extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,i=n.rect[2]-n.rect[0],a=n.rect[3]-n.rect[1],c=this.svgFactory.create(i,a);for(const d of n.inkLists){let _=[];for(const w of d){const W=w.x-n.rect[0],G=n.rect[3]-w.y;_.push(`${W},${G}`)}_=_.join(" ");const T=this.svgFactory.createElement(this.svgElementName);T.setAttribute("points",_),T.setAttribute("stroke-width",n.borderStyle.width||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","none"),this._createPopup(this.container,T,n),c.appendChild(T)}return this.container.append(c),this.container}}class f extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0)}render(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class k extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0)}render(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class x extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0)}render(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class N extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0)}render(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class I extends D{constructor(n){const i=!!(n.data.hasPopup||n.data.title||n.data.contents);super(n,i,!0)}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class L extends D{constructor(n){super(n,!0);const{filename:i,content:a}=this.data.file;this.filename=(0,e.getFilenameFromUrl)(i),this.content=a,this.linkService.eventBus&&this.linkService.eventBus.dispatch("fileattachmentannotation",{source:this,id:(0,A.stringToPDFString)(i),filename:i,content:a})}render(){this.container.className="fileAttachmentAnnotation";const n=document.createElement("div");return n.style.height=this.container.style.height,n.style.width=this.container.style.width,n.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.title||this.data.contents)&&this._createPopup(this.container,n,this.data),this.container.appendChild(n),this.container}_download(){if(!this.downloadManager){(0,A.warn)("Download cannot be started due to unavailable download manager");return}this.downloadManager.downloadData(this.content,this.filename,"")}}class B{static render(n){const i=[],a=[];for(const c of n.annotations){if(!c)continue;if(c.annotationType===A.AnnotationType.POPUP){a.push(c);continue}i.push(c)}a.length&&i.push(...a);for(const c of i){const d=F.create({data:c,layer:n.div,page:n.page,viewport:n.viewport,linkService:n.linkService,downloadManager:n.downloadManager,imageResourcesPath:n.imageResourcesPath||"",renderInteractiveForms:n.renderInteractiveForms||!1,svgFactory:new e.DOMSVGFactory});d.isRenderable&&n.div.appendChild(d.render())}}static update(n){for(const i of n.annotations){const a=n.div.querySelector(`[data-annotation-id="${i.id}"]`);a&&(a.style.transform=`matrix(${n.viewport.transform.join(",")})`)}n.div.removeAttribute("hidden")}}r.AnnotationLayer=B},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.renderTextLayer=void 0;var e=y(2),A=function(){var D=1e5,j=/\S/;function m(C){return!j.test(C)}function v(C,S,E){var u=document.createElement("span"),t={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(C._textDivs.push(u),m(S.str)){t.isWhitespace=!0,C._textDivProperties.set(u,t);return}var s=e.Util.transform(C._viewport.transform,S.transform),o=Math.atan2(s[1],s[0]),p=E[S.fontName];p.vertical&&(o+=Math.PI/2);var f=Math.sqrt(s[2]*s[2]+s[3]*s[3]),k=f;p.ascent?k=p.ascent*k:p.descent&&(k=(1+p.descent)*k);let x,N;o===0?(x=s[4],N=s[5]-k):(x=s[4]+k*Math.sin(o),N=s[5]-k*Math.cos(o)),u.style.left=`${x}px`,u.style.top=`${N}px`,u.style.fontSize=`${f}px`,u.style.fontFamily=p.fontFamily,u.textContent=S.str,C._fontInspectorEnabled&&(u.dataset.fontName=S.fontName),o!==0&&(t.angle=o*(180/Math.PI));let I=!1;if(S.str.length>1)I=!0;else if(S.transform[0]!==S.transform[3]){const c=Math.abs(S.transform[0]),d=Math.abs(S.transform[3]);c!==d&&Math.max(c,d)/Math.min(c,d)>1.5&&(I=!0)}if(I&&(p.vertical?t.canvasWidth=S.height*C._viewport.scale:t.canvasWidth=S.width*C._viewport.scale),C._textDivProperties.set(u,t),C._textContentStream&&C._layoutText(u),C._enhanceTextSelection){var L=1,B=0;o!==0&&(L=Math.cos(o),B=Math.sin(o));var M=(p.vertical?S.height:S.width)*C._viewport.scale,n=f,i,a;o!==0?(i=[L,B,-B,L,x,N],a=e.Util.getAxialAlignedBoundingBox([0,0,M,n],i)):a=[x,N,x+M,N+n],C._bounds.push({left:a[0],top:a[1],right:a[2],bottom:a[3],div:u,size:[M,n],m:i})}}function h(C){if(C._canceled)return;var S=C._textDivs,E=C._capability,u=S.length;if(u>D){C._renderingDone=!0,E.resolve();return}if(!C._textContentStream)for(var t=0;t<u;t++)C._layoutText(S[t]);C._renderingDone=!0,E.resolve()}function b(C,S,E){let u=0;for(let t=0;t<E;t++){const s=C[S++];s>0&&(u=u?Math.min(s,u):s)}return u}function O(C){for(var S=C._bounds,E=C._viewport,u=l(E.width,E.height,S),t=0;t<u.length;t++){var s=S[t].div,o=C._textDivProperties.get(s);if(o.angle===0){o.paddingLeft=S[t].left-u[t].left,o.paddingTop=S[t].top-u[t].top,o.paddingRight=u[t].right-S[t].right,o.paddingBottom=u[t].bottom-S[t].bottom,C._textDivProperties.set(s,o);continue}var p=u[t],f=S[t],k=f.m,x=k[0],N=k[1],I=[[0,0],[0,f.size[1]],[f.size[0],0],f.size],L=new Float64Array(64);I.forEach(function(M,n){var i=e.Util.applyTransform(M,k);L[n+0]=x&&(p.left-i[0])/x,L[n+4]=N&&(p.top-i[1])/N,L[n+8]=x&&(p.right-i[0])/x,L[n+12]=N&&(p.bottom-i[1])/N,L[n+16]=N&&(p.left-i[0])/-N,L[n+20]=x&&(p.top-i[1])/x,L[n+24]=N&&(p.right-i[0])/-N,L[n+28]=x&&(p.bottom-i[1])/x,L[n+32]=x&&(p.left-i[0])/-x,L[n+36]=N&&(p.top-i[1])/-N,L[n+40]=x&&(p.right-i[0])/-x,L[n+44]=N&&(p.bottom-i[1])/-N,L[n+48]=N&&(p.left-i[0])/N,L[n+52]=x&&(p.top-i[1])/-x,L[n+56]=N&&(p.right-i[0])/N,L[n+60]=x&&(p.bottom-i[1])/-x});var B=1+Math.min(Math.abs(x),Math.abs(N));o.paddingLeft=b(L,32,16)/B,o.paddingTop=b(L,48,16)/B,o.paddingRight=b(L,0,16)/B,o.paddingBottom=b(L,16,16)/B,C._textDivProperties.set(s,o)}}function l(C,S,E){var u=E.map(function(s,o){return{x1:s.left,y1:s.top,x2:s.right,y2:s.bottom,index:o,x1New:void 0,x2New:void 0}});g(C,u);var t=new Array(E.length);return u.forEach(function(s){var o=s.index;t[o]={left:s.x1New,top:0,right:s.x2New,bottom:0}}),E.map(function(s,o){var p=t[o],f=u[o];f.x1=s.top,f.y1=C-p.right,f.x2=s.bottom,f.y2=C-p.left,f.index=o,f.x1New=void 0,f.x2New=void 0}),g(S,u),u.forEach(function(s){var o=s.index;t[o].top=s.x1New,t[o].bottom=s.x2New}),t}function g(C,S){S.sort(function(t,s){return t.x1-s.x1||t.index-s.index});var E={x1:-Infinity,y1:-Infinity,x2:0,y2:Infinity,index:-1,x1New:0,x2New:0},u=[{start:-Infinity,end:Infinity,boundary:E}];S.forEach(function(t){for(var s=0;s<u.length&&u[s].end<=t.y1;)s++;for(var o=u.length-1;o>=0&&u[o].start>=t.y2;)o--;var p,f,k,x,N=-Infinity;for(k=s;k<=o;k++){p=u[k],f=p.boundary;var I;f.x2>t.x1?I=f.index>t.index?f.x1New:t.x1:f.x2New===void 0?I=(f.x2+t.x1)/2:I=f.x2New,I>N&&(N=I)}for(t.x1New=N,k=s;k<=o;k++)p=u[k],f=p.boundary,f.x2New===void 0?f.x2>t.x1?f.index>t.index&&(f.x2New=f.x2):f.x2New=N:f.x2New>N&&(f.x2New=Math.max(N,f.x2));var L=[],B=null;for(k=s;k<=o;k++){p=u[k],f=p.boundary;var M=f.x2>t.x2?f:t;B===M?L[L.length-1].end=p.end:(L.push({start:p.start,end:p.end,boundary:M}),B=M)}for(u[s].start<t.y1&&(L[0].start=t.y1,L.unshift({start:u[s].start,end:t.y1,boundary:u[s].boundary})),t.y2<u[o].end&&(L[L.length-1].end=t.y2,L.push({start:t.y2,end:u[o].end,boundary:u[o].boundary})),k=s;k<=o;k++){if(p=u[k],f=p.boundary,f.x2New!==void 0)continue;var n=!1;for(x=s-1;!n&&x>=0&&u[x].start>=f.y1;x--)n=u[x].boundary===f;for(x=o+1;!n&&x<u.length&&u[x].end<=f.y2;x++)n=u[x].boundary===f;for(x=0;!n&&x<L.length;x++)n=L[x].boundary===f;n||(f.x2New=N)}Array.prototype.splice.apply(u,[s,o-s+1].concat(L))}),u.forEach(function(t){var s=t.boundary;s.x2New===void 0&&(s.x2New=Math.max(C,s.x2))})}function P({textContent:C,textContentStream:S,container:E,viewport:u,textDivs:t,textContentItemsStr:s,enhanceTextSelection:o}){this._textContent=C,this._textContentStream=S,this._container=E,this._viewport=u,this._textDivs=t||[],this._textContentItemsStr=s||[],this._enhanceTextSelection=!!o,this._fontInspectorEnabled=!!(globalThis.FontInspector&&globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,e.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}P.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems(C,S){for(let E=0,u=C.length;E<u;E++)this._textContentItemsStr.push(C[E].str),v(this,C[E],S)},_layoutText(C){const S=this._textDivProperties.get(C);if(S.isWhitespace)return;let E="";if(S.canvasWidth!==0){const{fontSize:u,fontFamily:t}=C.style;(u!==this._layoutTextLastFontSize||t!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${u} ${t}`,this._layoutTextLastFontSize=u,this._layoutTextLastFontFamily=t);const{width:s}=this._layoutTextCtx.measureText(C.textContent);s>0&&(S.scale=S.canvasWidth/s,E=`scaleX(${S.scale})`)}S.angle!==0&&(E=`rotate(${S.angle}deg) ${E}`),E.length>0&&(this._enhanceTextSelection&&(S.originalTransform=E),C.style.transform=E),this._textDivProperties.set(C,S),this._container.appendChild(C)},_render:function(S){const E=(0,e.createPromiseCapability)();let u=Object.create(null);const t=document.createElement("canvas");if(t.mozOpaque=!0,this._layoutTextCtx=t.getContext("2d",{alpha:!1}),this._textContent){const s=this._textContent.items,o=this._textContent.styles;this._processItems(s,o),E.resolve()}else if(this._textContentStream){const s=()=>{this._reader.read().then(({value:o,done:p})=>{if(p){E.resolve();return}Object.assign(u,o.styles),this._processItems(o.items,u),s()},E.reject)};this._reader=this._textContentStream.getReader(),s()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');E.promise.then(()=>{u=null,S?this._renderTimer=setTimeout(()=>{h(this),this._renderTimer=null},S):h(this)},this._capability.reject)},expandTextDivs:function(S){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(O(this),this._bounds=null);const E=[],u=[];for(var t=0,s=this._textDivs.length;t<s;t++){const o=this._textDivs[t],p=this._textDivProperties.get(o);if(p.isWhitespace)continue;S?(E.length=0,u.length=0,p.originalTransform&&E.push(p.originalTransform),p.paddingTop>0?(u.push(`${p.paddingTop}px`),E.push(`translateY(${-p.paddingTop}px)`)):u.push(0),p.paddingRight>0?u.push(`${p.paddingRight/p.scale}px`):u.push(0),p.paddingBottom>0?u.push(`${p.paddingBottom}px`):u.push(0),p.paddingLeft>0?(u.push(`${p.paddingLeft/p.scale}px`),E.push(`translateX(${-p.paddingLeft/p.scale}px)`)):u.push(0),o.style.padding=u.join(" "),E.length&&(o.style.transform=E.join(" "))):(o.style.padding=null,o.style.transform=p.originalTransform)}}};function R(C){var S=new P({textContent:C.textContent,textContentStream:C.textContentStream,container:C.container,viewport:C.viewport,textDivs:C.textDivs,textContentItemsStr:C.textContentItemsStr,enhanceTextSelection:C.enhanceTextSelection});return S._render(C.timeout),S}return R}();r.renderTextLayer=A},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0;var e=y(2),A=y(1),F=y(4);let D=function(){throw new Error("Not implemented: SVGGraphics")};r.SVGGraphics=D;{const h={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},b="http://www.w3.org/XML/1998/namespace",O="http://www.w3.org/1999/xlink",l=["butt","round","square"],g=["miter","round","bevel"],P=function(){const u=new Uint8Array([137,80,78,71,13,10,26,10]),t=12,s=new Int32Array(256);for(let I=0;I<256;I++){let L=I;for(let B=0;B<8;B++)L&1?L=3988292384^L>>1&2147483647:L=L>>1&2147483647;s[I]=L}function o(I,L,B){let M=-1;for(let n=L;n<B;n++){const i=(M^I[n])&255,a=s[i];M=M>>>8^a}return M^-1}function p(I,L,B,M){let n=M;const i=L.length;B[n]=i>>24&255,B[n+1]=i>>16&255,B[n+2]=i>>8&255,B[n+3]=i&255,n+=4,B[n]=I.charCodeAt(0)&255,B[n+1]=I.charCodeAt(1)&255,B[n+2]=I.charCodeAt(2)&255,B[n+3]=I.charCodeAt(3)&255,n+=4,B.set(L,n),n+=L.length;const a=o(B,M+4,n);B[n]=a>>24&255,B[n+1]=a>>16&255,B[n+2]=a>>8&255,B[n+3]=a&255}function f(I,L,B){let M=1,n=0;for(let i=L;i<B;++i)M=(M+(I[i]&255))%65521,n=(n+M)%65521;return n<<16|M}function k(I){if(!F.isNodeJS)return x(I);try{let L;parseInt(process.versions.node)>=8?L=I:L=Buffer.from(I);const B=require$$4.deflateSync(L,{level:9});return B instanceof Uint8Array?B:new Uint8Array(B)}catch(L){(0,e.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+L)}return x(I)}function x(I){let L=I.length;const B=65535,M=Math.ceil(L/B),n=new Uint8Array(2+L+M*5+4);let i=0;n[i++]=120,n[i++]=156;let a=0;for(;L>B;)n[i++]=0,n[i++]=255,n[i++]=255,n[i++]=0,n[i++]=0,n.set(I.subarray(a,a+B),i),i+=B,a+=B,L-=B;n[i++]=1,n[i++]=L&255,n[i++]=L>>8&255,n[i++]=~L&65535&255,n[i++]=(~L&65535)>>8&255,n.set(I.subarray(a),i),i+=I.length-a;const c=f(I,0,I.length);return n[i++]=c>>24&255,n[i++]=c>>16&255,n[i++]=c>>8&255,n[i++]=c&255,n}function N(I,L,B,M){const n=I.width,i=I.height;let a,c,d;const _=I.data;switch(L){case e.ImageKind.GRAYSCALE_1BPP:c=0,a=1,d=n+7>>3;break;case e.ImageKind.RGB_24BPP:c=2,a=8,d=n*3;break;case e.ImageKind.RGBA_32BPP:c=6,a=8,d=n*4;break;default:throw new Error("invalid format")}const T=new Uint8Array((1+d)*i);let w=0,W=0;for(let K=0;K<i;++K)T[w++]=0,T.set(_.subarray(W,W+d),w),W+=d,w+=d;if(L===e.ImageKind.GRAYSCALE_1BPP&&M){w=0;for(let K=0;K<i;K++){w++;for(let V=0;V<d;V++)T[w++]^=255}}const G=new Uint8Array([n>>24&255,n>>16&255,n>>8&255,n&255,i>>24&255,i>>16&255,i>>8&255,i&255,a,c,0,0,0]),H=k(T),$=u.length+t*3+G.length+H.length,X=new Uint8Array($);let Y=0;return X.set(u,Y),Y+=u.length,p("IHDR",G,X,Y),Y+=t+G.length,p("IDATA",H,X,Y),Y+=t+H.length,p("IEND",new Uint8Array(0),X,Y),(0,e.createObjectURL)(X,"image/png",B)}return function(L,B,M){const n=L.kind===void 0?e.ImageKind.GRAYSCALE_1BPP:L.kind;return N(L,n,B,M)}}();class R{constructor(){this.fontSizeScale=1,this.fontWeight=h.fontWeight,this.fontSize=0,this.textMatrix=e.IDENTITY_MATRIX,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=e.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=h.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,s){this.x=t,this.y=s}}function j(u){let t=[];const s=[];for(const o of u){if(o.fn==="save"){t.push({fnId:92,fn:"group",items:[]}),s.push(t),t=t[t.length-1].items;continue}o.fn==="restore"?t=s.pop():t.push(o)}return t}function m(u){if(Number.isInteger(u))return u.toString();const t=u.toFixed(10);let s=t.length-1;if(t[s]!=="0")return t;do s--;while(t[s]==="0");return t.substring(0,t[s]==="."?s:s+1)}function v(u){if(u[4]===0&&u[5]===0){if(u[1]===0&&u[2]===0)return u[0]===1&&u[3]===1?"":`scale(${m(u[0])} ${m(u[3])})`;if(u[0]===u[3]&&u[1]===-u[2]){const t=Math.acos(u[0])*180/Math.PI;return`rotate(${m(t)})`}}else if(u[0]===1&&u[1]===0&&u[2]===0&&u[3]===1)return`translate(${m(u[4])} ${m(u[5])})`;return`matrix(${m(u[0])} ${m(u[1])} ${m(u[2])} ${m(u[3])} ${m(u[4])} ${m(u[5])})`}let C=0,S=0,E=0;r.SVGGraphics=D=class{constructor(t,s,o=!1){this.svgFactory=new A.DOMSVGFactory,this.current=new R,this.transformMatrix=e.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!o,this._operatorIdMapping=[];for(const p in e.OPS)this._operatorIdMapping[e.OPS[p]]=p}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const s=t.fnArray,o=t.argsArray;for(let p=0,f=s.length;p<f;p++){if(s[p]!==e.OPS.dependency)continue;for(const k of o[p]){const x=k.startsWith("g_")?this.commonObjs:this.objs,N=new Promise(I=>{x.get(k,I)});this.current.dependencies.push(N)}}return Promise.all(this.current.dependencies)}transform(t,s,o,p,f,k){const x=[t,s,o,p,f,k];this.transformMatrix=e.Util.transform(this.transformMatrix,x),this.tgrp=null}getSVG(t,s){this.viewport=s;const o=this._initialize(s);return this.loadDependencies(t).then(()=>(this.transformMatrix=e.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),o))}convertOpList(t){const s=this._operatorIdMapping,o=t.argsArray,p=t.fnArray,f=[];for(let k=0,x=p.length;k<x;k++){const N=p[k];f.push({fnId:N,fn:s[N],args:o[k]})}return j(f)}executeOpTree(t){for(const s of t){const o=s.fn,p=s.fnId,f=s.args;switch(p|0){case e.OPS.beginText:this.beginText();break;case e.OPS.dependency:break;case e.OPS.setLeading:this.setLeading(f);break;case e.OPS.setLeadingMoveText:this.setLeadingMoveText(f[0],f[1]);break;case e.OPS.setFont:this.setFont(f);break;case e.OPS.showText:this.showText(f[0]);break;case e.OPS.showSpacedText:this.showText(f[0]);break;case e.OPS.endText:this.endText();break;case e.OPS.moveText:this.moveText(f[0],f[1]);break;case e.OPS.setCharSpacing:this.setCharSpacing(f[0]);break;case e.OPS.setWordSpacing:this.setWordSpacing(f[0]);break;case e.OPS.setHScale:this.setHScale(f[0]);break;case e.OPS.setTextMatrix:this.setTextMatrix(f[0],f[1],f[2],f[3],f[4],f[5]);break;case e.OPS.setTextRise:this.setTextRise(f[0]);break;case e.OPS.setTextRenderingMode:this.setTextRenderingMode(f[0]);break;case e.OPS.setLineWidth:this.setLineWidth(f[0]);break;case e.OPS.setLineJoin:this.setLineJoin(f[0]);break;case e.OPS.setLineCap:this.setLineCap(f[0]);break;case e.OPS.setMiterLimit:this.setMiterLimit(f[0]);break;case e.OPS.setFillRGBColor:this.setFillRGBColor(f[0],f[1],f[2]);break;case e.OPS.setStrokeRGBColor:this.setStrokeRGBColor(f[0],f[1],f[2]);break;case e.OPS.setStrokeColorN:this.setStrokeColorN(f);break;case e.OPS.setFillColorN:this.setFillColorN(f);break;case e.OPS.shadingFill:this.shadingFill(f[0]);break;case e.OPS.setDash:this.setDash(f[0],f[1]);break;case e.OPS.setRenderingIntent:this.setRenderingIntent(f[0]);break;case e.OPS.setFlatness:this.setFlatness(f[0]);break;case e.OPS.setGState:this.setGState(f[0]);break;case e.OPS.fill:this.fill();break;case e.OPS.eoFill:this.eoFill();break;case e.OPS.stroke:this.stroke();break;case e.OPS.fillStroke:this.fillStroke();break;case e.OPS.eoFillStroke:this.eoFillStroke();break;case e.OPS.clip:this.clip("nonzero");break;case e.OPS.eoClip:this.clip("evenodd");break;case e.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case e.OPS.paintImageXObject:this.paintImageXObject(f[0]);break;case e.OPS.paintInlineImageXObject:this.paintInlineImageXObject(f[0]);break;case e.OPS.paintImageMaskXObject:this.paintImageMaskXObject(f[0]);break;case e.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(f[0],f[1]);break;case e.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case e.OPS.closePath:this.closePath();break;case e.OPS.closeStroke:this.closeStroke();break;case e.OPS.closeFillStroke:this.closeFillStroke();break;case e.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case e.OPS.nextLine:this.nextLine();break;case e.OPS.transform:this.transform(f[0],f[1],f[2],f[3],f[4],f[5]);break;case e.OPS.constructPath:this.constructPath(f[0],f[1]);break;case e.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,e.warn)(`Unimplemented operator ${o}`);break}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,s,o,p,f,k){const x=this.current;x.textMatrix=x.lineMatrix=[t,s,o,p,f,k],x.textMatrixScale=Math.sqrt(t*t+s*s),x.x=x.lineX=0,x.y=x.lineY=0,x.xcoords=[],x.ycoords=[],x.tspan=this.svgFactory.createElement("svg:tspan"),x.tspan.setAttributeNS(null,"font-family",x.fontFamily),x.tspan.setAttributeNS(null,"font-size",`${m(x.fontSize)}px`),x.tspan.setAttributeNS(null,"y",m(-x.y)),x.txtElement=this.svgFactory.createElement("svg:text"),x.txtElement.appendChild(x.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=e.IDENTITY_MATRIX,t.lineMatrix=e.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,s){const o=this.current;o.x=o.lineX+=t,o.y=o.lineY+=s,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${m(o.fontSize)}px`),o.tspan.setAttributeNS(null,"y",m(-o.y))}showText(t){const s=this.current,o=s.font,p=s.fontSize;if(p===0)return;const f=s.fontSizeScale,k=s.charSpacing,x=s.wordSpacing,N=s.fontDirection,I=s.textHScale*N,L=o.vertical,B=L?1:-1,M=o.defaultVMetrics,n=p*s.fontMatrix[0];let i=0;for(const d of t){if(d===null){i+=N*x;continue}else if((0,e.isNum)(d)){i+=B*d*p/1e3;continue}const _=(d.isSpace?x:0)+k,T=d.fontChar;let w,W,G=d.width;if(L){let $;const X=d.vmetric||M;$=d.vmetric?X[1]:G*.5,$=-$*n;const Y=X[2]*n;G=X?-X[0]:G,w=$/f,W=(i+Y)/f}else w=i/f,W=0;(d.isInFont||o.missingFile)&&(s.xcoords.push(s.x+w),L&&s.ycoords.push(-s.y+W),s.tspan.textContent+=T);let H;L?H=G*n-_*N:H=G*n+_*N,i+=H}s.tspan.setAttributeNS(null,"x",s.xcoords.map(m).join(" ")),L?s.tspan.setAttributeNS(null,"y",s.ycoords.map(m).join(" ")):s.tspan.setAttributeNS(null,"y",m(-s.y)),L?s.y-=i:s.x+=i*I,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${m(s.fontSize)}px`),s.fontStyle!==h.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==h.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const a=s.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;if(a===e.TextRenderingMode.FILL||a===e.TextRenderingMode.FILL_STROKE?(s.fillColor!==h.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===e.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),a===e.TextRenderingMode.STROKE||a===e.TextRenderingMode.FILL_STROKE){const d=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,d)}let c=s.textMatrix;s.textRise!==0&&(c=c.slice(),c[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${v(c)} scale(${m(I)}, -1)`),s.txtElement.setAttributeNS(b,"xml:space","preserve"),s.txtElement.appendChild(s.tspan),s.txtgrp.appendChild(s.txtElement),this._ensureTransformGroup().appendChild(s.txtElement)}setLeadingMoveText(t,s){this.setLeading(-s),this.moveText(t,s)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const s=(0,e.createObjectURL)(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${s}); }
`}setFont(t){const s=this.current,o=this.commonObjs.get(t[0]);let p=t[1];s.font=o,this.embedFonts&&!o.missingFile&&!this.embeddedFonts[o.loadedName]&&(this.addFontStyle(o),this.embeddedFonts[o.loadedName]=o),s.fontMatrix=o.fontMatrix?o.fontMatrix:e.FONT_IDENTITY_MATRIX;let f="normal";o.black?f="900":o.bold&&(f="bold");const k=o.italic?"italic":"normal";p<0?(p=-p,s.fontDirection=-1):s.fontDirection=1,s.fontSize=p,s.fontFamily=o.loadedName,s.fontWeight=f,s.fontStyle=k,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",m(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){const t=this.current;t.textRenderingMode&e.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement&&t.txtElement.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=l[t]}setLineJoin(t){this.current.lineJoin=g[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,s,o){this.current.strokeColor=e.Util.makeCssRgb(t,s,o)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,s,o){this.current.fillColor=e.Util.makeCssRgb(t,s,o),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const s=this.viewport.width,o=this.viewport.height,p=e.Util.inverseTransform(this.transformMatrix),f=e.Util.applyTransform([0,0],p),k=e.Util.applyTransform([0,o],p),x=e.Util.applyTransform([s,0],p),N=e.Util.applyTransform([s,o],p),I=Math.min(f[0],k[0],x[0],N[0]),L=Math.min(f[1],k[1],x[1],N[1]),B=Math.max(f[0],k[0],x[0],N[0]),M=Math.max(f[1],k[1],x[1],N[1]),n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x",I),n.setAttributeNS(null,"y",L),n.setAttributeNS(null,"width",B-I),n.setAttributeNS(null,"height",M-L),n.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&n.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(n)}_makeColorN_Pattern(t){return t[0]==="TilingPattern"?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const s=t[1],o=t[2],p=t[3]||e.IDENTITY_MATRIX,[f,k,x,N]=t[4],I=t[5],L=t[6],B=t[7],M=`shading${E++}`,[n,i]=e.Util.applyTransform([f,k],p),[a,c]=e.Util.applyTransform([x,N],p),[d,_]=e.Util.singularValueDecompose2dScale(p),T=I*d,w=L*_,W=this.svgFactory.createElement("svg:pattern");W.setAttributeNS(null,"id",M),W.setAttributeNS(null,"patternUnits","userSpaceOnUse"),W.setAttributeNS(null,"width",T),W.setAttributeNS(null,"height",w),W.setAttributeNS(null,"x",`${n}`),W.setAttributeNS(null,"y",`${i}`);const G=this.svg,H=this.transformMatrix,$=this.current.fillColor,X=this.current.strokeColor,Y=this.svgFactory.create(a-n,c-i);if(this.svg=Y,this.transformMatrix=p,B===2){const K=e.Util.makeCssRgb(...s);this.current.fillColor=K,this.current.strokeColor=K}return this.executeOpTree(this.convertOpList(o)),this.svg=G,this.transformMatrix=H,this.current.fillColor=$,this.current.strokeColor=X,W.appendChild(Y.childNodes[0]),this.defs.appendChild(W),`url(#${M})`}_makeShadingPattern(t){switch(t[0]){case"RadialAxial":const s=`shading${E++}`,o=t[3];let p;switch(t[1]){case"axial":const f=t[4],k=t[5];p=this.svgFactory.createElement("svg:linearGradient"),p.setAttributeNS(null,"id",s),p.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),p.setAttributeNS(null,"x1",f[0]),p.setAttributeNS(null,"y1",f[1]),p.setAttributeNS(null,"x2",k[0]),p.setAttributeNS(null,"y2",k[1]);break;case"radial":const x=t[4],N=t[5],I=t[6],L=t[7];p=this.svgFactory.createElement("svg:radialGradient"),p.setAttributeNS(null,"id",s),p.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),p.setAttributeNS(null,"cx",N[0]),p.setAttributeNS(null,"cy",N[1]),p.setAttributeNS(null,"r",L),p.setAttributeNS(null,"fx",x[0]),p.setAttributeNS(null,"fy",x[1]),p.setAttributeNS(null,"fr",I);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const f of o){const k=this.svgFactory.createElement("svg:stop");k.setAttributeNS(null,"offset",f[0]),k.setAttributeNS(null,"stop-color",f[1]),p.appendChild(k)}return this.defs.appendChild(p),`url(#${s})`;case"Mesh":return(0,e.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,s){this.current.dashArray=t,this.current.dashPhase=s}constructPath(t,s){const o=this.current;let p=o.x,f=o.y,k=[],x=0;for(const N of t)switch(N|0){case e.OPS.rectangle:p=s[x++],f=s[x++];const I=s[x++],L=s[x++],B=p+I,M=f+L;k.push("M",m(p),m(f),"L",m(B),m(f),"L",m(B),m(M),"L",m(p),m(M),"Z");break;case e.OPS.moveTo:p=s[x++],f=s[x++],k.push("M",m(p),m(f));break;case e.OPS.lineTo:p=s[x++],f=s[x++],k.push("L",m(p),m(f));break;case e.OPS.curveTo:p=s[x+4],f=s[x+5],k.push("C",m(s[x]),m(s[x+1]),m(s[x+2]),m(s[x+3]),m(p),m(f)),x+=6;break;case e.OPS.curveTo2:k.push("C",m(p),m(f),m(s[x]),m(s[x+1]),m(s[x+2]),m(s[x+3])),p=s[x+2],f=s[x+3],x+=4;break;case e.OPS.curveTo3:p=s[x+2],f=s[x+3],k.push("C",m(s[x]),m(s[x+1]),m(p),m(f),m(p),m(f)),x+=4;break;case e.OPS.closePath:k.push("Z");break}k=k.join(" "),o.path&&t.length>0&&t[0]!==e.OPS.rectangle&&t[0]!==e.OPS.moveTo?k=o.path.getAttributeNS(null,"d")+k:(o.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(o.path)),o.path.setAttributeNS(null,"d",k),o.path.setAttributeNS(null,"fill","none"),o.element=o.path,o.setCurrentPoint(p,f)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element){this.pendingClip=null;return}const s=`clippath${C++}`,o=this.svgFactory.createElement("svg:clipPath");o.setAttributeNS(null,"id",s),o.setAttributeNS(null,"transform",v(this.transformMatrix));const p=t.element.cloneNode(!0);this.pendingClip==="evenodd"?p.setAttributeNS(null,"clip-rule","evenodd"):p.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,o.appendChild(p),this.defs.appendChild(o),t.activeClipUrl&&(t.clipGroup=null,this.extraStack.forEach(function(f){f.clipGroup=null}),o.setAttributeNS(null,"clip-path",t.activeClipUrl)),t.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const s=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",s)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[s,o]of t)switch(s){case"LW":this.setLineWidth(o);break;case"LC":this.setLineCap(o);break;case"LJ":this.setLineJoin(o);break;case"ML":this.setMiterLimit(o);break;case"D":this.setDash(o[0],o[1]);break;case"RI":this.setRenderingIntent(o);break;case"FL":this.setFlatness(o);break;case"Font":this.setFont(o);break;case"CA":this.setStrokeAlpha(o);break;case"ca":this.setFillAlpha(o);break;default:(0,e.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,s=1){const o=this.current;let p=o.dashArray;s!==1&&p.length>0&&(p=p.map(function(f){return s*f})),t.setAttributeNS(null,"stroke",o.strokeColor),t.setAttributeNS(null,"stroke-opacity",o.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",m(o.miterLimit)),t.setAttributeNS(null,"stroke-linecap",o.lineCap),t.setAttributeNS(null,"stroke-linejoin",o.lineJoin),t.setAttributeNS(null,"stroke-width",m(s*o.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",p.map(m).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",m(s*o.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(t)}paintImageXObject(t){const s=this.objs.get(t);if(!s){(0,e.warn)(`Dependent image with object ID ${t} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(t,s){const o=t.width,p=t.height,f=P(t,this.forceDataSchema,!!s),k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",m(o)),k.setAttributeNS(null,"height",m(p)),this.current.element=k,this.clip("nonzero");const x=this.svgFactory.createElement("svg:image");x.setAttributeNS(O,"xlink:href",f),x.setAttributeNS(null,"x","0"),x.setAttributeNS(null,"y",m(-p)),x.setAttributeNS(null,"width",m(o)+"px"),x.setAttributeNS(null,"height",m(p)+"px"),x.setAttributeNS(null,"transform",`scale(${m(1/o)} ${m(-1/p)})`),s?s.appendChild(x):this._ensureTransformGroup().appendChild(x)}paintImageMaskXObject(t){const s=this.current,o=t.width,p=t.height,f=s.fillColor;s.maskId=`mask${S++}`;const k=this.svgFactory.createElement("svg:mask");k.setAttributeNS(null,"id",s.maskId);const x=this.svgFactory.createElement("svg:rect");x.setAttributeNS(null,"x","0"),x.setAttributeNS(null,"y","0"),x.setAttributeNS(null,"width",m(o)),x.setAttributeNS(null,"height",m(p)),x.setAttributeNS(null,"fill",f),x.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.appendChild(k),this._ensureTransformGroup().appendChild(x),this.paintInlineImageXObject(t,k)}paintFormXObjectBegin(t,s){if(Array.isArray(t)&&t.length===6&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),s){const o=s[2]-s[0],p=s[3]-s[1],f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",s[0]),f.setAttributeNS(null,"y",s[1]),f.setAttributeNS(null,"width",m(o)),f.setAttributeNS(null,"height",m(p)),this.current.element=f,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const s=this.svgFactory.create(t.width,t.height),o=this.svgFactory.createElement("svg:defs");s.appendChild(o),this.defs=o;const p=this.svgFactory.createElement("svg:g");return p.setAttributeNS(null,"transform",v(t.transform)),s.appendChild(p),this.svg=p,s}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNodeStream=void 0;var e=y(2),A=y(20);const F=require$$4,D=require$$4,j=require$$4,m=require$$4,v=/^file:\/\/\/[a-zA-Z]:\//;function h(E){const u=m.parse(E);return u.protocol==="file:"||u.host?u:/^[a-z]:[/\\]/i.test(E)?m.parse(`file:///${E}`):(u.host||(u.protocol="file:"),u)}class b{constructor(u){this.source=u,this.url=h(u.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&u.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new C(this):new P(this),this._fullRequestReader}getRangeReader(u,t){if(t<=this._progressiveDataLength)return null;const s=this.isFsUrl?new S(this,u,t):new R(this,u,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(u){this._fullRequestReader&&this._fullRequestReader.cancel(u);const t=this._rangeRequestReaders.slice(0);t.forEach(function(s){s.cancel(u)})}}r.PDFNodeStream=b;class O{constructor(u){this._url=u.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=u.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._headersCapability=(0,e.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const u=this._readableStream.read();if(u===null)return this._readCapability=(0,e.createPromiseCapability)(),this.read();this._loaded+=u.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});const t=new Uint8Array(u).buffer;return{value:t,done:!1}}cancel(u){if(!this._readableStream){this._error(u);return}this._readableStream.destroy(u)}_error(u){this._storedError=u,this._readCapability.resolve()}_setReadableStream(u){this._readableStream=u,u.on("readable",()=>{this._readCapability.resolve()}),u.on("end",()=>{u.destroy(),this._done=!0,this._readCapability.resolve()}),u.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class l{constructor(u){this._url=u.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)();const t=u.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const u=this._readableStream.read();if(u===null)return this._readCapability=(0,e.createPromiseCapability)(),this.read();this._loaded+=u.length,this.onProgress&&this.onProgress({loaded:this._loaded});const t=new Uint8Array(u).buffer;return{value:t,done:!1}}cancel(u){if(!this._readableStream){this._error(u);return}this._readableStream.destroy(u)}_error(u){this._storedError=u,this._readCapability.resolve()}_setReadableStream(u){this._readableStream=u,u.on("readable",()=>{this._readCapability.resolve()}),u.on("end",()=>{u.destroy(),this._done=!0,this._readCapability.resolve()}),u.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(E,u){return{protocol:E.protocol,auth:E.auth,host:E.hostname,port:E.port,path:E.path,method:"GET",headers:u}}class P extends O{constructor(u){super(u);const t=s=>{if(s.statusCode===404){const k=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=k,this._headersCapability.reject(k);return}this._headersCapability.resolve(),this._setReadableStream(s);const o=k=>this._readableStream.headers[k.toLowerCase()],{allowRangeRequests:p,suggestedLength:f}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:u.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=p,this._contentLength=f||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(o)};this._request=null,this._url.protocol==="http:"?this._request=D.request(g(this._url,u.httpHeaders),t):this._request=j.request(g(this._url,u.httpHeaders),t),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class R extends l{constructor(u,t,s){super(u);this._httpHeaders={};for(const p in u.httpHeaders){const f=u.httpHeaders[p];if(typeof f=="undefined")continue;this._httpHeaders[p]=f}this._httpHeaders.Range=`bytes=${t}-${s-1}`;const o=p=>{if(p.statusCode===404){const f=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f;return}this._setReadableStream(p)};this._request=null,this._url.protocol==="http:"?this._request=D.request(g(this._url,this._httpHeaders),o):this._request=j.request(g(this._url,this._httpHeaders),o),this._request.on("error",p=>{this._storedError=p}),this._request.end()}}class C extends O{constructor(u){super(u);let t=decodeURIComponent(this._url.path);v.test(this._url.href)&&(t=t.replace(/^\//,"")),F.lstat(t,(s,o)=>{if(s){s.code==="ENOENT"&&(s=new e.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=s,this._headersCapability.reject(s);return}this._contentLength=o.size,this._setReadableStream(F.createReadStream(t)),this._headersCapability.resolve()})}}class S extends l{constructor(u,t,s){super(u);let o=decodeURIComponent(this._url.path);v.test(this._url.href)&&(o=o.replace(/^\//,"")),this._setReadableStream(F.createReadStream(o,{start:t,end:s-1}))}}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseStatusError=j,r.extractFilenameFromHeader=D,r.validateRangeRequestCapabilities=F,r.validateResponseStatus=m;var e=y(2),A=y(21);function F({getResponseHeader:v,isHttp:h,rangeChunkSize:b,disableRange:O}){(0,e.assert)(b>0,"Range chunk size must be larger than zero");const l={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(v("Content-Length"),10);if(!Number.isInteger(g))return l;if(l.suggestedLength=g,g<=2*b)return l;if(O||!h)return l;if(v("Accept-Ranges")!=="bytes")return l;const P=v("Content-Encoding")||"identity";return P!=="identity"||(l.allowRangeRequests=!0),l}function D(v){const h=v("Content-Disposition");if(h){let b=(0,A.getFilenameFromContentDispositionHeader)(h);if(b.includes("%"))try{b=decodeURIComponent(b)}catch(O){}if(/\.pdf$/i.test(b))return b}return null}function j(v,h){return v===404||v===0&&h.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+h+'".'):new e.UnexpectedResponseException("Unexpected server response ("+v+') while retrieving PDF "'+h+'".',v)}function m(v){return v===200||v===206}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.getFilenameFromContentDispositionHeader=e;function e(A){let F=!0,D=j("filename\\*","i").exec(A);if(D){D=D[1];let g=b(D);return g=unescape(g),g=O(g),g=l(g),v(g)}if(D=h(A),D){const g=l(D);return v(g)}if(D=j("filename","i").exec(A),D){D=D[1];let g=b(D);return g=l(g),v(g)}function j(g,P){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',P)}function m(g,P){if(g){if(!/^[\x00-\xFF]+$/.test(P))return P;try{const R=new TextDecoder(g,{fatal:!0}),C=Array.from(P,function(S){return S.charCodeAt(0)&255});P=R.decode(new Uint8Array(C)),F=!1}catch(R){if(/^utf-?8$/i.test(g))try{P=decodeURIComponent(escape(P)),F=!1}catch(C){}}}return P}function v(g){return F&&/[\x80-\xff]/.test(g)&&(g=m("utf-8",g),F&&(g=m("iso-8859-1",g))),g}function h(g){const P=[];let R;const C=j("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(R=C.exec(g))!==null;){let[,E,u,t]=R;if(E=parseInt(E,10),E in P){if(E===0)break;continue}P[E]=[u,t]}const S=[];for(let E=0;E<P.length&&E in P;++E){let[u,t]=P[E];t=b(t),u&&(t=unescape(t),E===0&&(t=O(t))),S.push(t)}return S.join("")}function b(g){if(g.startsWith('"')){const P=g.slice(1).split('\\"');for(let R=0;R<P.length;++R){const C=P[R].indexOf('"');C!==-1&&(P[R]=P[R].slice(0,C),P.length=R+1),P[R]=P[R].replace(/\\(.)/g,"$1")}g=P.join('"')}return g}function O(g){const P=g.indexOf("'");if(P===-1)return g;const R=g.slice(0,P),C=g.slice(P+1),S=C.replace(/^[^']*'/,"");return m(R,S)}function l(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(P,R,C,S){if(C==="q"||C==="Q")return S=S.replace(/_/g," "),S=S.replace(/=([0-9a-fA-F]{2})/g,function(E,u){return String.fromCharCode(parseInt(u,16))}),m(R,S);try{S=atob(S)}catch(E){}return m(R,S)})}return""}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNetworkStream=void 0;var e=y(2),A=y(20);const F=200,D=206;function j(O){const l=O.response;if(typeof l!="string")return l;const g=(0,e.stringToBytes)(l);return g.buffer}class m{constructor(l,g){this.url=l,g=g||{},this.isHttp=/^https?:/i.test(l),this.httpHeaders=this.isHttp&&g.httpHeaders||{},this.withCredentials=g.withCredentials||!1,this.getXhr=g.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(l,g,P){const R={begin:l,end:g};for(const C in P)R[C]=P[C];return this.request(R)}requestFull(l){return this.request(l)}request(l){const g=this.getXhr(),P=this.currXhrId++,R=this.pendingRequests[P]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(const C in this.httpHeaders){const S=this.httpHeaders[C];if(typeof S=="undefined")continue;g.setRequestHeader(C,S)}return this.isHttp&&"begin"in l&&"end"in l?(g.setRequestHeader("Range",`bytes=${l.begin}-${l.end-1}`),R.expectedStatus=D):R.expectedStatus=F,g.responseType="arraybuffer",l.onError&&(g.onerror=function(C){l.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,P),g.onprogress=this.onProgress.bind(this,P),R.onHeadersReceived=l.onHeadersReceived,R.onDone=l.onDone,R.onError=l.onError,R.onProgress=l.onProgress,g.send(null),P}onProgress(l,g){const P=this.pendingRequests[l];if(!P)return;P.onProgress&&P.onProgress(g)}onStateChange(l,g){const P=this.pendingRequests[l];if(!P)return;const R=P.xhr;if(R.readyState>=2&&P.onHeadersReceived&&(P.onHeadersReceived(),delete P.onHeadersReceived),R.readyState!==4)return;if(!(l in this.pendingRequests))return;if(delete this.pendingRequests[l],R.status===0&&this.isHttp){P.onError&&P.onError(R.status);return}const C=R.status||F,S=C===F&&P.expectedStatus===D;if(!S&&C!==P.expectedStatus){P.onError&&P.onError(R.status);return}const E=j(R);if(C===D){const u=R.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);P.onDone({begin:parseInt(t[1],10),chunk:E})}else E?P.onDone({begin:0,chunk:E}):P.onError&&P.onError(R.status)}hasPendingRequests(){for(const l in this.pendingRequests)return!0;return!1}getRequestXhr(l){return this.pendingRequests[l].xhr}isPendingRequest(l){return l in this.pendingRequests}abortAllRequests(){for(const l in this.pendingRequests)this.abortRequest(l|0)}abortRequest(l){const g=this.pendingRequests[l].xhr;delete this.pendingRequests[l],g.abort()}}class v{constructor(l){this._source=l,this._manager=new m(l.url,{httpHeaders:l.httpHeaders,withCredentials:l.withCredentials}),this._rangeChunkSize=l.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(l){const g=this._rangeRequestReaders.indexOf(l);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new h(this._manager,this._source),this._fullRequestReader}getRangeReader(l,g){const P=new b(this._manager,l,g);return P.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(P),P}cancelAllRequests(l){this._fullRequestReader&&this._fullRequestReader.cancel(l);const g=this._rangeRequestReaders.slice(0);g.forEach(function(P){P.cancel(l)})}}r.PDFNetworkStream=v;class h{constructor(l,g){this._manager=l;const P={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=l.requestFull(P),this._headersReceivedCapability=(0,e.createPromiseCapability)(),this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const l=this._fullRequestId,g=this._manager.getRequestXhr(l),P=S=>g.getResponseHeader(S),{allowRangeRequests:R,suggestedLength:C}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});R&&(this._isRangeSupported=!0),this._contentLength=C||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(P),this._isRangeSupported&&this._manager.abortRequest(l),this._headersReceivedCapability.resolve()}_onDone(l){if(l)if(this._requests.length>0){const g=this._requests.shift();g.resolve({value:l.chunk,done:!1})}else this._cachedChunks.push(l.chunk);if(this._done=!0,this._cachedChunks.length>0)return;this._requests.forEach(function(g){g.resolve({value:void 0,done:!0})}),this._requests=[]}_onError(l){const g=this._url,P=(0,A.createResponseStatusError)(l,g);this._storedError=P,this._headersReceivedCapability.reject(P),this._requests.forEach(function(R){R.reject(P)}),this._requests=[],this._cachedChunks=[]}_onProgress(l){this.onProgress&&this.onProgress({loaded:l.loaded,total:l.lengthComputable?l.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){const g=this._cachedChunks.shift();return{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const l=(0,e.createPromiseCapability)();return this._requests.push(l),l.promise}cancel(l){this._done=!0,this._headersReceivedCapability.reject(l),this._requests.forEach(function(g){g.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class b{constructor(l,g,P){this._manager=l;const R={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=l.requestRange(g,P,R),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(l){const g=l.chunk;if(this._requests.length>0){const P=this._requests.shift();P.resolve({value:g,done:!1})}else this._queuedChunk=g;this._done=!0,this._requests.forEach(function(P){P.resolve({value:void 0,done:!0})}),this._requests=[],this._close()}_onProgress(l){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:l.loaded})}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk!==null){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const l=(0,e.createPromiseCapability)();return this._requests.push(l),l.promise}cancel(l){this._done=!0,this._requests.forEach(function(g){g.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFetchStream=void 0;var e=y(2),A=y(20);function F(h,b,O){return{method:"GET",headers:h,signal:O&&O.signal,mode:"cors",credentials:b?"include":"same-origin",redirect:"follow"}}function D(h){const b=new Headers;for(const O in h){const l=h[O];if(typeof l=="undefined")continue;b.append(O,l)}return b}class j{constructor(b){this.source=b,this.isHttp=/^https?:/i.test(b.url),this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new m(this),this._fullRequestReader}getRangeReader(b,O){if(O<=this._progressiveDataLength)return null;const l=new v(this,b,O);return this._rangeRequestReaders.push(l),l}cancelAllRequests(b){this._fullRequestReader&&this._fullRequestReader.cancel(b);const O=this._rangeRequestReaders.slice(0);O.forEach(function(l){l.cancel(b)})}}r.PDFFetchStream=j;class m{constructor(b){this._stream=b,this._reader=null,this._loaded=0,this._filename=null;const O=b.source;this._withCredentials=O.withCredentials||!1,this._contentLength=O.length,this._headersCapability=(0,e.createPromiseCapability)(),this._disableRange=O.disableRange||!1,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!O.disableStream,this._isRangeSupported=!O.disableRange,this._headers=D(this._stream.httpHeaders);const l=O.url;fetch(l,F(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,A.validateResponseStatus)(g.status))throw(0,A.createResponseStatusError)(g.status,l);this._reader=g.body.getReader(),this._headersCapability.resolve();const P=S=>g.headers.get(S),{allowRangeRequests:R,suggestedLength:C}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=R,this._contentLength=C||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(P),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:b,done:O}=await this._reader.read();if(O)return{value:b,done:O};this._loaded+=b.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});const l=new Uint8Array(b).buffer;return{value:l,done:!1}}cancel(b){this._reader&&this._reader.cancel(b),this._abortController&&this._abortController.abort()}}class v{constructor(b,O,l){this._stream=b,this._reader=null,this._loaded=0;const g=b.source;this._withCredentials=g.withCredentials||!1,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!g.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=D(this._stream.httpHeaders),this._headers.append("Range",`bytes=${O}-${l-1}`);const P=g.url;fetch(P,F(this._headers,this._withCredentials,this._abortController)).then(R=>{if(!(0,A.validateResponseStatus)(R.status))throw(0,A.createResponseStatusError)(R.status,P);this._readCapability.resolve(),this._reader=R.body.getReader()}),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:b,done:O}=await this._reader.read();if(O)return{value:b,done:O};this._loaded+=b.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded});const l=new Uint8Array(b).buffer;return{value:l,done:!1}}cancel(b){this._reader&&this._reader.cancel(b),this._abortController&&this._abortController.abort()}}}])})}),__pika_web_default_export_for_treeshaking__=getDefaultExportFromCjs(pdf);export default __pika_web_default_export_for_treeshaking__;
