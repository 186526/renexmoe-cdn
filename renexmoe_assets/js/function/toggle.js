import e from"../lib/mdui.js";import{refresh as r,logout as n}from"../utils.js";import{click as c}from"./checkupdate.js";import{ToggleListener as l}from"./menu.js";const t=e.$;export default()=>{t("#toggle-drawer").on("click",()=>{new e.Drawer("#main-drawer",{swipe:!0}).toggle()}),t(".downloadurl").each((i,a)=>{a.addEventListener("click",()=>{l(),new e.dialog({content:`<div class="mdui-textfield mdui-textfield-floating-label mdui-textfield-not-empty mdui-textfield-disabled"><label class="mdui-textfield-label">URL</label><input class="mdui-textfield-input" type="email" value="${location.href.replace("?preview","")}" id="url-input" disabled=""></div>`,title:"File URL",buttons:[{text:"\u786E\u5B9A",onClick:()=>{l()}}]}),e.mutation()})}),t(".back").each((i,a)=>{a.addEventListener("click",()=>{window.history.back()})}),t(".back-page").each((i,a)=>{a.addEventListener("click",()=>{globalThis.renexmoe.pjax.loadUrl("../")})}),t(".refresh").each((i,a)=>{a.addEventListener("click",()=>{e.snackbar("\u5237\u65B0\u7F13\u5B58\u4E2D\u2026\u2026"),r(location.href).then(o=>{if(o)e.snackbar("\u5DF2\u6210\u529F\u5237\u65B0\u7F13\u5B58"),window.renexmoe.pjax.loadUrl(location.href);else throw e.snackbar("\u5237\u65B0\u7F13\u5B58\u9047\u5230\u672A\u77E5\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u662F\u5426\u5728\u76D8\u7B26\u76EE\u5F55\u9875\u9762"),response})})}),t("#logout").on("click",()=>{e.snackbar("\u5C1D\u8BD5\u9000\u51FA\u767B\u9646\u2026\u2026"),n()})};const d=()=>{t("#about_theme").on("click",()=>{new e.alert('<div class="mdui-typo"><a href="https://github.com/186526/onemanager-theme-renexmoe">Onemanager-theme-renexmoe</a><br>Open source under GPL-3.0 License<br>Build with Love & MDUI & Gulp & snowpack | webpack<br>Author:<a href="https://186526.xyz">186526</a></div>',"\u5173\u4E8Erenexmoe"),e.mutation()}),t("#checkupdate").on("click",()=>{c()})};export{d as drawertoggle};
